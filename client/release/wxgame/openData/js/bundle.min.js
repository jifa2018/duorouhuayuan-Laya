var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();!function(){return function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}}()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GameConfig=function(){function GameConfig(){}return GameConfig.init=function(){Laya.ClassUtils.regClass},GameConfig.width=750,GameConfig.height=1334,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="rank/RankItem.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!1,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig}();exports.default=GameConfig,GameConfig.init()},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GameConfig_1=require("./GameConfig"),RankView_1=require("./view/RankView");new(function(){function Main(){Laya.isWXOpenDataContext=!0,Laya.isWXPosMsg=!0,Laya.init(GameConfig_1.default.width,GameConfig_1.default.height,!1),Laya.stage.scaleMode=GameConfig_1.default.scaleMode,Laya.stage.screenMode=GameConfig_1.default.screenMode,Laya.stage.alignV=GameConfig_1.default.alignV,Laya.stage.alignH=GameConfig_1.default.alignH;var _this=this;Laya.Browser.onMiniGame&&wx.onMessage(function(data){console.log("子域收到消息=="+data.url),null!=data.openid&&(_this.openid=data.openid),null!=data.url&&Laya.loader.load(data.url,Laya.Handler.create(_this,_this.Show)),(data="close")&&null!=_this.curView&&(_this.curView.destroy(),_this.curView=null)}.bind(this))}return Main.prototype.Show=function(){var _this=this,arrList={},myList={},openid=this.openid;wx.getFriendCloudStorage({keyList:["Levels","Weapon"],success:function(res){if(res.data)for(var i=0;i<res.data.length;i++){var obj=res.data[i];if(!(obj.KVDataList.length<=0))for(var _i=0,_a=obj.KVDataList;_i<_a.length;_i++){var kv=_a[_i],rankType=RankView_1.RankType[kv.key];null==arrList[rankType]&&(arrList[rankType]=[]),(info={}).nickname=obj.nickname,info.avatarUrl=obj.avatarUrl,info.openid=obj.openid,info.value=Number(kv.value),arrList[rankType].push(info)}}for(var rankType in arrList){var arr=arrList[rankType];for(var idx in arr=arr.sort(function(a,b){return b.value-a.value})){var info;(info=arr[idx]).openid==openid&&(myList[rankType]=idx)}}_this.curView=new RankView_1.default(arrList,myList),Laya.stage.addChild(_this.curView),_this.curView.left=0,_this.curView.right=0,_this.curView.top=0,_this.curView.bottom=0},fail:function(data){console.log("------------------获取托管数据失败--------------------"),console.log(data)}})},Main}())},{"./GameConfig":1,"./view/RankView":4}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var REG=Laya.ClassUtils.regClass;!function(ui){!function(rank){var RankItemUI=function(_super){function RankItemUI(){return _super.call(this)||this}return __extends(RankItemUI,_super),RankItemUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(RankItemUI.uiView)},RankItemUI.uiView={type:"View",props:{width:711,height:88},compId:2,child:[{type:"Image",props:{y:0,x:10,skin:"ui/Rank/普通排名底框.png",sizeGrid:"10,10,10,10",right:0,name:"rank_bg",left:0,height:88},compId:3},{type:"Image",props:{y:28,x:48,name:"rank_lv"},compId:4},{type:"Image",props:{y:10,x:14,name:"rank_icon"},compId:5},{type:"Label",props:{y:22,x:155,width:291,valign:"middle",text:"玩家名称",overflow:"hidden",name:"rank_name",height:43,fontSize:26,color:"#7f2100",align:"center"},compId:6},{type:"Label",props:{y:22,x:489,width:206,valign:"middle",text:"第         关",overflow:"hidden",name:"rank_info",height:43,fontSize:26,color:"#9c5724",align:"center"},compId:7},{type:"Label",props:{y:22,x:489,width:206,valign:"middle",text:"999",strokeColor:"#aa5000",stroke:3,overflow:"hidden",name:"rank_num",height:43,fontSize:30,color:"#fff",align:"center"},compId:8}],loadList:["ui/Rank/普通排名底框.png"],loadList3D:[]},RankItemUI}(Laya.View);rank.RankItemUI=RankItemUI,REG("ui.rank.RankItemUI",RankItemUI);var RankViewUI=function(_super){function RankViewUI(){return _super.call(this)||this}return __extends(RankViewUI,_super),RankViewUI.prototype.createChildren=function(){_super.prototype.createChildren.call(this),this.createView(RankViewUI.uiView)},RankViewUI.uiView={type:"View",props:{y:0,width:690,isPopupCenter:!1,isModal:!1,height:1136},compId:2,child:[{type:"Image",props:{width:574,skin:"gameui/Rank/bigbg.png",sizeGrid:"159,153,222,128",height:810,centerY:0,centerX:0},compId:63,child:[{type:"Image",props:{y:30,x:187,skin:"gameui/Rank/name.png"},compId:78}]},{type:"Box",props:{y:860,x:88,var:"buttons"},compId:28,child:[{type:"Button",props:{y:0,x:0,var:"button0",stateNum:1,skin:"gameui/Rank/btn0_1.png",anchorY:0,anchorX:0},compId:29},{type:"Button",props:{y:0,x:129,var:"button1",stateNum:1,skin:"gameui/Rank/btn1_1.png",anchorY:0,anchorX:0},compId:31},{type:"Button",props:{y:0,x:258,var:"button2",stateNum:1,skin:"gameui/Rank/btn2_1.png",anchorY:0,anchorX:0},compId:35},{type:"Button",props:{y:0,x:387,var:"button3",stateNum:1,skin:"gameui/Rank/btn3_1.png",anchorY:0,anchorX:0},compId:36}]},{type:"List",props:{y:317,x:86,width:518,var:"rank",spaceY:5,height:426,elasticEnabled:!0},compId:8,child:[{type:"Box",props:{y:0,x:13,width:492,renderType:"render",height:94},compId:9,child:[{type:"Image",props:{y:0,x:0,skin:"gameui/Rank/bg.png",sizeGrid:"10,10,10,10",name:"rank_bg"},compId:65},{type:"Label",props:{y:15.5,x:48,width:38,valign:"middle",text:"1",name:"rank_rank",height:64,fontSize:18,font:"Microsoft YaHei",color:"#b0792b",align:"center"},compId:80},{type:"Image",props:{y:22.5,x:102,width:47,skin:"ui/Rank/icon1.png",name:"rank_icon",height:47},compId:67},{type:"Image",props:{y:20,x:97,skin:"gameui/Rank/icon.png"},compId:79},{type:"Label",props:{y:29.5,x:177,width:171,valign:"middle",text:"玩家名称",overflow:"hidden",name:"rank_name",height:36,fontSize:18,color:"#7f2100",align:"left"},compId:68},{type:"Image",props:{y:34.5,x:348,width:23,skin:"gameui/Rank/img_star.png",height:26},compId:81},{type:"Label",props:{y:29,x:381,width:76,valign:"middle",text:"4896",name:"rank_star",height:36,fontSize:14,font:"Microsoft YaHei",color:"#b0792b",align:"left"},compId:82}]}]},{type:"Box",props:{y:761,x:87,width:513,var:"own",height:88},compId:14,child:[{type:"Label",props:{y:12,x:41,width:38,valign:"middle",text:"1",name:"rank_rank",height:64,fontSize:18,font:"Microsoft YaHei",color:"#b0792b",align:"center"},compId:84},{type:"Image",props:{y:19,x:95,width:47,skin:"ui/Rank/icon1.png",name:"rank_icon",height:47},compId:85},{type:"Image",props:{y:17,x:90,skin:"gameui/Rank/icon.png"},compId:86},{type:"Label",props:{y:26,x:170,width:171,valign:"middle",text:"玩家名称",overflow:"hidden",name:"rank_name",height:36,fontSize:18,color:"#7f2100",align:"left"},compId:87},{type:"Image",props:{y:31,x:341,width:23,skin:"gameui/Rank/img_star.png",height:26},compId:88},{type:"Label",props:{y:26,x:374,width:76,valign:"middle",text:"4896",name:"rank_star",height:36,fontSize:14,font:"Microsoft YaHei",color:"#b0792b",align:"left"},compId:89}]}],loadList:["gameui/Rank/bigbg.png","gameui/Rank/name.png","gameui/Rank/btn0_1.png","gameui/Rank/btn1_1.png","gameui/Rank/btn2_1.png","gameui/Rank/btn3_1.png","gameui/Rank/bg.png","ui/Rank/icon1.png","gameui/Rank/icon.png","gameui/Rank/img_star.png"],loadList3D:[]},RankViewUI}(Laya.View);rank.RankViewUI=RankViewUI,REG("ui.rank.RankViewUI",RankViewUI)}(ui.rank||(ui.rank={}))}(exports.ui||(exports.ui={}))},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var RankType,layaMaxUI_1=require("../ui/layaMaxUI");!function(RankType){RankType[RankType.Friends=0]="Friends",RankType[RankType.Weapon=1]="Weapon",RankType[RankType.Count=2]="Count",RankType[RankType.Count1=3]="Count1"}(RankType=exports.RankType||(exports.RankType={}));var RankView=function(_super){function RankView(arrList,myList){var _this=_super.call(this)||this;_this.curRankType=RankType.Friends,_this.rankList={},_this.myList={},_this.rankList=arrList,_this.myList=myList;for(var rankType=0;rankType<RankType.Count;rankType++){null==_this.rankList[rankType]&&(_this.rankList[rankType]=[]),_this["button"+rankType].on(Laya.Event.CLICK,_this,_this.SwitchTab,[rankType])}return _this.rank.array=[],_this.rank.renderHandler=Laya.Handler.create(_this,_this.RankRender,null,!1),_this.rank.vScrollBarSkin="",_this.SwitchTab(RankType.Friends),_this}return __extends(RankView,_super),RankView.prototype.SwitchTab=function(rankType){this.curRankType=rankType;for(var index=0;index<RankType.Count;index++){var btn=this["button"+index];this.curRankType==index?btn.skin="ui/Rank/btn"+index+"_2.png":btn.skin="ui/Rank/btn"+index+"_1.png"}var arr=this.rankList[this.curRankType];this.rank.array=arr,this.rank.refresh(),this.RankRender(this.own,this.myList[this.curRankType])},RankView.prototype.RankRender=function(node,idx){if(null!=idx){var info=this.rank.array[idx],rank=Number(idx)+1,rank_rank=(node.getChildByName("rank_icon"),node.getChildByName("rank_rank")),rank_num=(node.getChildByName("rank_info"),node.getChildByName("rank_num")),rank_name=node.getChildByName("rank_name");rank_rank.text=rank+"",rank_num.text=info.value,rank_name.text=info.nickname}},RankView}(layaMaxUI_1.ui.rank.RankViewUI);exports.default=RankView},{"../ui/layaMaxUI":3}]},{},[2]);