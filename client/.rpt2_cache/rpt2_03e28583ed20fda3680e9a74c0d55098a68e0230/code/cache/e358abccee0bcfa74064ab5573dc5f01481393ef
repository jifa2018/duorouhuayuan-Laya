{
  "code": "export class AvatarPool {\r\n    constructor() {\r\n        this._factoryLoadList = {};\r\n        this._factoryLoadMapping = {};\r\n        this._factoryObj = {};\r\n    }\r\n    static get Inst() {\r\n        if (AvatarPool._inst == null)\r\n            AvatarPool._inst = new AvatarPool();\r\n        return AvatarPool._inst;\r\n    }\r\n    GetFactory(path, callBack) {\r\n        let oTemplet = this._factoryObj[path];\r\n        if (!oTemplet) {\r\n            oTemplet = new Laya.Templet();\r\n            oTemplet.loadAni(path);\r\n            oTemplet.on(Laya.Event.COMPLETE, this, () => {\r\n                oTemplet.offAll();\r\n                if (this._factoryLoadList[path] != null) {\r\n                    for (let fun of this._factoryLoadList[path]) {\r\n                        fun.runWith(oTemplet);\r\n                    }\r\n                }\r\n                this._factoryLoadList[path] = null;\r\n                callBack.runWith(oTemplet);\r\n                this._factoryLoadMapping[path] = true;\r\n            });\r\n            this._factoryObj[path] = oTemplet;\r\n        }\r\n        else {\r\n            if (this._factoryLoadMapping[path] != true) {\r\n                if (this._factoryLoadList[path] == null) {\r\n                    this._factoryLoadList[path] = [];\r\n                }\r\n                this._factoryLoadList[path].push(callBack);\r\n                return;\r\n            }\r\n            callBack.runWith(oTemplet);\r\n        }\r\n    }\r\n}\r\nexport class ImagePool {\r\n    constructor() {\r\n        this._ImageList = [];\r\n    }\r\n    static get Inst() {\r\n        if (!this._Inst) {\r\n            this._Inst = new ImagePool();\r\n        }\r\n        return this._Inst;\r\n    }\r\n    GetImage() {\r\n        for (let i = 0; i < this._ImageList.length; i++) {\r\n            let image = this._ImageList[i];\r\n            if (image.destroyed) {\r\n                this._ImageList.splice(i, 1);\r\n            }\r\n            else if (image.visible == false) {\r\n                image.visible = true;\r\n                return image;\r\n            }\r\n        }\r\n        let newImage = new Laya.Image();\r\n        this._ImageList.push(newImage);\r\n        return newImage;\r\n    }\r\n    Destroy(image) {\r\n        if (!image)\r\n            return;\r\n        image.removeSelf();\r\n        image.visible = false;\r\n    }\r\n}\r\nImagePool._Inst = null;\r\nexport class PointPool {\r\n    constructor() {\r\n        this._PointList = [];\r\n    }\r\n    static get Inst() {\r\n        if (!this._inst) {\r\n            this._inst = new PointPool();\r\n        }\r\n        return this._inst;\r\n    }\r\n    GetPoint(x, y) {\r\n        x = x != null ? x : 0;\r\n        y = y != null ? y : 0;\r\n        for (let i = 0; i < this._PointList.length; i++) {\r\n            let CurPoint = this._PointList[i];\r\n            if (CurPoint.x == -5 && CurPoint.y == -5) {\r\n                CurPoint.x = x;\r\n                CurPoint.y = y;\r\n                return CurPoint;\r\n            }\r\n        }\r\n        let TempPoint = new Laya.Point(x, y);\r\n        this._PointList.push(TempPoint);\r\n        return TempPoint;\r\n    }\r\n    RecyclePoint(point) {\r\n        if (!point)\r\n            return;\r\n        point.x = -5;\r\n        point.y = -5;\r\n    }\r\n}\r\nPointPool._inst = null;\r\n//# sourceMappingURL=ResourcePool.js.map",
  "references": [],
  "map": "{\"version\":3,\"file\":\"ResourcePool.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/effect/ResourcePool.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
