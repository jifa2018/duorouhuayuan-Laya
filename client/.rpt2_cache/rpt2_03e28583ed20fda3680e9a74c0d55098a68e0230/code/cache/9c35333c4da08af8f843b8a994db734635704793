{
  "code": "import { NpcBase } from \"./NpcBase\";\r\nimport { MoveController } from \"../script/MoveController\";\r\nvar Handler = Laya.Handler;\r\nimport { ResourceManager } from \"../../manager/ResourceManager\";\r\nimport { AnimatorController } from \"../script/AnimatorController\";\r\nimport { Utils } from \"../../utils/Utils\";\r\nimport { NpcManager } from \"../../manager/NpcManager\";\r\nimport { BubbleCreater } from \"../ui/Bubble/BubbleCreater\";\r\nimport { GuideAI } from \"../ai/GuideAI\";\r\nexport class GuideNpc extends NpcBase {\r\n    constructor() { super(); }\r\n    createById(tableId) {\r\n        super.createById(tableId);\r\n        this.clickIndex = 0;\r\n        this.loadModel();\r\n    }\r\n    loadModel() {\r\n        ResourceManager.getInstance().getResource(this._tableData.strmodelurl, Handler.create(this, (node) => {\r\n            if (!node) {\r\n                console.log(\"NPC模型没有加载完成！\");\r\n            }\r\n            this.sprite3dNode = node;\r\n            this.Camera = Utils.FindTransfrom(this.sprite3dNode, \"Prop_xiangji\");\r\n            this._animator = this.addComponent(AnimatorController);\r\n            this._moveController = this.addComponent(MoveController);\r\n            Laya.timer.callLater(this, () => {\r\n                this._aiController = this.addComponent(GuideAI);\r\n                this._moveController.changSpeed(this.Cruise_speed);\r\n            });\r\n            this.clickEnable = false;\r\n            this.addChild(this.sprite3dNode);\r\n        }));\r\n    }\r\n    GetCamera() {\r\n        super.GetCamera();\r\n        return this.Camera;\r\n    }\r\n    ActionDone() {\r\n        super.ActionDone();\r\n        this.clickIndex = 0;\r\n    }\r\n    clear() {\r\n        this.sprite3dNode.destroy();\r\n        this.removeSelf();\r\n        this._animator.destroy();\r\n        this._moveController.destroy();\r\n        this._aiController.destroy();\r\n        this._animator = null;\r\n        this._moveController = null;\r\n        this._aiController = null;\r\n        BubbleCreater.instance._bubbleList.forEach(element => {\r\n            if (element.owner == this)\r\n                BubbleCreater.instance.removeBubble(element);\r\n        });\r\n        Laya.timer.clearAll(this);\r\n    }\r\n    onMove() {\r\n        super.onMove();\r\n    }\r\n    onStop() {\r\n        super.onStop();\r\n        this.clear();\r\n        NpcManager.getInstance().recoverNpc(\"NpcBase\", this);\r\n    }\r\n    onUpdate() {\r\n        super.onUpdate();\r\n    }\r\n    onDestroy() { }\r\n}\r\n//# sourceMappingURL=GuideNpc.js.map",
  "references": [
    "E:/project/duorou/client/src/game/npc/NpcBase.ts",
    "E:/project/duorou/client/src/game/script/MoveController.ts",
    "E:/project/duorou/client/src/manager/ResourceManager.ts",
    "E:/project/duorou/client/src/game/script/AnimatorController.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/manager/NpcManager.ts",
    "E:/project/duorou/client/src/game/ui/Bubble/BubbleCreater.ts",
    "E:/project/duorou/client/src/game/ai/GuideAI.ts"
  ],
  "map": "{\"version\":3,\"file\":\"GuideNpc.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/npc/GuideNpc.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
