{
  "code": "import { ui } from \"../../../ui/layaMaxUI\";\r\nimport { DefaultStatue_Cfg, ConfigManager, Statue_Cfg } from \"../../../manager/ConfigManager\";\r\nimport { BottomCreater } from \"../../item/BottomCreater\";\r\nimport { Player } from \"../../player/Player\";\r\nexport class IndexDecorateView extends ui.view.decorate.indexDecorateUI {\r\n    constructor() {\r\n        super();\r\n        this.mDecorateItem = new Map();\r\n        this.nList = ConfigManager.prototype.GetJsonToArray(DefaultStatue_Cfg);\r\n        this.nStatue = ConfigManager.prototype.GetJsonToArray(Statue_Cfg);\r\n    }\r\n    onEnable() {\r\n        this.init();\r\n        this.bindEvent();\r\n        this.initBtnList();\r\n        this.refreshBtnList(this.nList);\r\n    }\r\n    onDestroy() {\r\n    }\r\n    init() {\r\n        this.width = Laya.stage.width;\r\n        this.height = Laya.stage.height;\r\n    }\r\n    bindEvent() {\r\n    }\r\n    extendArrDecorate(item, obj) {\r\n        let _data = obj.arrDecorate;\r\n        let bottomList = BottomCreater.getInstance().getBottomList();\r\n        let unLock = [];\r\n        let _curDecorateId = null;\r\n        let _lv = 0;\r\n        let extend = { unLock: [], selected: [], isMeet: [] };\r\n        bottomList.forEach((e, i) => {\r\n            if (item.name == e._name) {\r\n                unLock = e._unLockDecorates;\r\n                _curDecorateId = e._curDecorateId;\r\n                _lv = e._level;\r\n            }\r\n        });\r\n        for (let index = 0; index < _data.length; index++) {\r\n            const element = _data[index];\r\n            if (_curDecorateId == element.id && extend[\"selected\"].indexOf(element.id) == -1) {\r\n                extend[\"selected\"].push(element.id);\r\n            }\r\n            if (extend[\"unLock\"].indexOf(element.id) == -1) {\r\n                if (unLock.indexOf(element.id) != -1) {\r\n                    extend[\"unLock\"].push(element.id);\r\n                    continue;\r\n                }\r\n            }\r\n            else {\r\n                continue;\r\n            }\r\n            let vNum = 0;\r\n            if (element.UnlockGold <= Player.getInstance().nGold)\r\n                vNum++;\r\n            if (element.UnlockStar <= Player.getInstance().nStar)\r\n                vNum++;\r\n            if (element.UnlockLv <= _lv)\r\n                vNum++;\r\n            if (element.unLock || vNum == 3 && extend[\"isMeet\"].indexOf(element.id) == -1) {\r\n                extend[\"isMeet\"].push(element.id);\r\n            }\r\n            obj[\"extend\"] = extend;\r\n        }\r\n        return obj;\r\n    }\r\n    refreshBtnList(arr) {\r\n        this.btn_list.array = arr;\r\n    }\r\n    initBtnList() {\r\n        this.btn_list.array = [];\r\n        this.btn_list.renderHandler = Laya.Handler.create(this, this.renderH, null, false);\r\n        this.btn_list.mouseHandler = Laya.Handler.create(this, this.mouseH, null, false);\r\n    }\r\n    renderH(cell, index) {\r\n        let _btn_item = cell.getChildByName(\"btn_item\");\r\n        let _img_lock = cell.getChildByName(\"img_lock\");\r\n        _btn_item.label = \"装饰点\" + (index + 1);\r\n        _btn_item[\"node_name\"] = cell.dataSource.strNodeName;\r\n        _img_lock.visible = this.getCurBottom(cell.dataSource.strNodeName) == null ? true : false;\r\n    }\r\n    mouseH(e) {\r\n        if (e.type == \"click\") {\r\n            let _name = e.target[\"node_name\"];\r\n        }\r\n    }\r\n    getCurBottom(name) {\r\n        let bottomList = BottomCreater.getInstance().getBottomList();\r\n        let bottom = null;\r\n        bottomList.forEach((e, i) => {\r\n            if (name == e._name) {\r\n                bottom = e;\r\n            }\r\n        });\r\n        return bottom;\r\n    }\r\n}\r\n//# sourceMappingURL=IndexDecorateView.js.map",
  "references": [
    "E:/project/duorou/client/src/ui/layaMaxUI.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/game/ui/Decorate/indexDecorateItem.ts",
    "E:/project/duorou/client/src/game/item/BottomCreater.ts",
    "E:/project/duorou/client/src/game/player/Player.ts",
    "E:/project/duorou/client/src/common/CommonDefine.ts",
    "E:/project/duorou/client/src/game/item/Bottom.ts"
  ],
  "map": "{\"version\":3,\"file\":\"IndexDecorateView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/game/ui/Decorate/IndexDecorateView.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
