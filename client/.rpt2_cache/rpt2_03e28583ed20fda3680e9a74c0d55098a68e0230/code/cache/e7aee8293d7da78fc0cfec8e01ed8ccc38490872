{
  "code": "var Sprite3D = Laya.Sprite3D;\r\nvar Pool = Laya.Pool;\r\nimport { AnimatorController } from \"../script/AnimatorController\";\r\nimport { Staff_Cfg } from \"../../manager/ConfigManager\";\r\nimport { GameData } from \"../data/GameData\";\r\nimport { GEvent } from \"../../common/GEvent\";\r\nimport { GacEvent } from \"../../common/GacEvent\";\r\nexport class StaffBase extends Sprite3D {\r\n    constructor() {\r\n        super();\r\n        this._loadDone = false;\r\n        this.upgradeing = false;\r\n        this.upgradeTime = 0;\r\n    }\r\n    onLoad(tableId) {\r\n        this.createById(tableId);\r\n    }\r\n    onStop() { }\r\n    onUpdate() {\r\n        if (this._loadDone) {\r\n            if (this.upgradeing) {\r\n                this.upgradeTime = this.upgradeTime - Laya.timer.delta / 1000;\r\n                if (this.upgradeTime <= 0) {\r\n                    this.upgradeing = false;\r\n                    this.upgrade(this._id + 1);\r\n                    GameData.upgrade(this._id - 1, this._id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onDestroy() { }\r\n    onClick() { }\r\n    createById(tableId) {\r\n        this._tableData = Staff_Cfg[tableId];\r\n        if (!this._tableData) {\r\n            console.log(\"員工表中没有id = \" + tableId.toString());\r\n            return;\r\n        }\r\n        this._id = tableId;\r\n        this._lv = this._tableData.lv;\r\n        this._type = this._tableData.jobID;\r\n    }\r\n    GetType() {\r\n        return this._type;\r\n    }\r\n    GetId() {\r\n        return this._id;\r\n    }\r\n    Getgrade() {\r\n        return this._lv;\r\n    }\r\n    SetupgradeTime(time) {\r\n        this.upgradeTime = time;\r\n    }\r\n    cloneThis(sp3d) {\r\n        this.sprite3dNode = sp3d.clone();\r\n        this._animator = this.addComponent(AnimatorController);\r\n        this.addChild(this.sprite3dNode);\r\n    }\r\n    moveTo(path, complate) {\r\n        if (this._moveController)\r\n            this._moveController.moveTo(path, complate);\r\n    }\r\n    stopMove() {\r\n        if (this._moveController)\r\n            this._moveController.stopMove();\r\n    }\r\n    recover() {\r\n        this.sprite3dNode.destroy();\r\n        this.sprite3dNode = null;\r\n        Pool.recover(this.clsName, this);\r\n    }\r\n    playAnimation(name) {\r\n        this._animator.play(name);\r\n    }\r\n    upgrade(tableId) {\r\n        this.upgradeing = false;\r\n        this._id = tableId;\r\n        this._tableData = Staff_Cfg[tableId];\r\n        this._lv = this._tableData.lv;\r\n        this._type = this._tableData.jobID;\r\n        switch (this._type) {\r\n            case 2:\r\n                GEvent.DispatchEvent(GacEvent.OnUpdata_dustmantime);\r\n                break;\r\n            case 3:\r\n                GEvent.DispatchEvent(GacEvent.OnUpdata_cameramantime);\r\n                break;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=StaffBase.js.map",
  "references": [
    "E:/project/duorou/client/src/game/script/AnimatorController.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/game/script/MoveController.ts",
    "E:/project/duorou/client/src/game/data/GameData.ts",
    "E:/project/duorou/client/src/common/GEvent.ts",
    "E:/project/duorou/client/src/common/GacEvent.ts"
  ],
  "map": "{\"version\":3,\"file\":\"StaffBase.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/Staff/StaffBase.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
