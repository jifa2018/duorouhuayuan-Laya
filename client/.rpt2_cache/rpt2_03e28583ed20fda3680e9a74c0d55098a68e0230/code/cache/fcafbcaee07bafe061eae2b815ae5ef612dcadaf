{
  "code": "import { Singleton } from \"../../common/Singleton\";\r\nimport { Time } from \"../../common/Time\";\r\nimport { GacEvent } from \"../../common/GacEvent\";\r\nimport { GEvent } from \"../../common/GEvent\";\r\nimport GameScene from \"../scene/GameScene\";\r\nimport { GatherView } from \"../ui/Gather/GatherView\";\r\nimport { StaffView } from \"../ui/Staff/StaffView\";\r\nimport { GameData } from \"../data/GameData\";\r\nimport { Player } from \"../player/Player\";\r\nimport { Collection_station_Cfg, Staff_Cfg } from \"../../manager/ConfigManager\";\r\nimport { ModelStorage, SaveManager } from \"../../manager/SaveManager\";\r\nimport { Utils } from \"../../utils/Utils\";\r\nexport class CheckRed extends Singleton {\r\n    constructor() {\r\n        super();\r\n        this._Time = 0;\r\n        this.CheckList = [\r\n            GatherView,\r\n            StaffView\r\n        ];\r\n        GEvent.RegistEvent(GacEvent.OnUpdate, Laya.Handler.create(this, this.OnUpdate));\r\n    }\r\n    OnUpdate() {\r\n        if (this._Time + Time.delta > 1000) {\r\n            GameScene.instance.oArrow[0].active = this.CheckGather();\r\n            GameScene.instance.oArrow[1].active = this.CheckStaff();\r\n        }\r\n        else {\r\n            this._Time += Time.delta;\r\n        }\r\n    }\r\n    CheckStaff() {\r\n        let _value = [];\r\n        let idunm = Utils.GetTableLength(Staff_Cfg);\r\n        let staffunm = Staff_Cfg[idunm].staffID;\r\n        for (let i = 1; i <= staffunm; i++) {\r\n            for (let j = 1; j <= idunm; j++) {\r\n                if (Staff_Cfg[j][\"staffID\"] == i) {\r\n                    _value.push(j);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        let value = GameData.RoleInfo;\r\n        if (value) {\r\n            for (let i = 0; i < value.length; i++) {\r\n                if (value[i][\"id\"] == 0) {\r\n                    if (Staff_Cfg[_value[i]][\"unlockstar\"] <= Player.getInstance().nStar\r\n                        && Staff_Cfg[_value[i]][\"hiregold\"] <= Player.getInstance().nGold) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    CheckGather() {\r\n        let values = GameData.RoleInfo;\r\n        let lv = SaveManager.getInstance().GetCache(ModelStorage.GatherLV);\r\n        if (lv == null) {\r\n            lv = 1;\r\n        }\r\n        if (values && lv) {\r\n            if (lv < Collection_station_Cfg[lv][\"lvup\"]\r\n                && Collection_station_Cfg[lv][\"upgold\"] <= Player.getInstance().nGold) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n//# sourceMappingURL=CheckRed.js.map",
  "references": [
    "E:/project/duorou/client/src/common/Singleton.ts",
    "E:/project/duorou/client/src/common/Time.ts",
    "E:/project/duorou/client/src/common/GacEvent.ts",
    "E:/project/duorou/client/src/common/GEvent.ts",
    "E:/project/duorou/client/src/game/scene/GameScene.ts",
    "E:/project/duorou/client/src/game/ui/Gather/GatherView.ts",
    "E:/project/duorou/client/src/game/ui/Staff/StaffView.ts",
    "E:/project/duorou/client/src/game/data/GameData.ts",
    "E:/project/duorou/client/src/game/player/Player.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/manager/SaveManager.ts",
    "E:/project/duorou/client/src/utils/Utils.ts"
  ],
  "map": "{\"version\":3,\"file\":\"CheckRed.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/checkred/CheckRed.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
