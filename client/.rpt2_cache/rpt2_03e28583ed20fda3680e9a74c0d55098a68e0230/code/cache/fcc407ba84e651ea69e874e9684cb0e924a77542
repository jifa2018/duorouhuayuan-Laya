{
  "code": "var Sprite3D = Laya.Sprite3D;\r\nvar Vector3 = Laya.Vector3;\r\nimport { ResourceManager } from \"../manager/ResourceManager\";\r\nvar Handler = Laya.Handler;\r\nvar ShuriKenParticle3D = Laya.ShuriKenParticle3D;\r\nexport class Effect3D extends Sprite3D {\r\n    constructor() {\r\n        super();\r\n        this.pos = null;\r\n    }\r\n    createFollowEffect(url, parent, playTime = 3000, loop = false, offset = null) {\r\n        this.addNode = parent;\r\n        this.bLoop = loop;\r\n        this.offset = offset;\r\n        this.liveTime = playTime;\r\n        ResourceManager.getInstance().getResource(url, Handler.create(this, this.onLoaded));\r\n    }\r\n    createSceneEffect(url, parent, position, playTime = 3000, loop = false, offset = null, callback = null) {\r\n        this.addNode = parent;\r\n        this.bLoop = loop;\r\n        this.pos = position;\r\n        this.offset = offset;\r\n        this.liveTime = playTime;\r\n        this.callback = callback;\r\n        ResourceManager.getInstance().getResource(url, Handler.create(this, this.onLoaded));\r\n    }\r\n    onLoaded(effect) {\r\n        this.effectNode = effect;\r\n        this.addNode.addChild(effect);\r\n        if (this.pos) {\r\n            effect.transform.position = this.pos.clone();\r\n        }\r\n        if (this.offset) {\r\n            Vector3.add(effect.transform.position, this.offset, this.pos);\r\n            effect.transform.position = this.pos.clone();\r\n        }\r\n        if (this.liveTime > 0) {\r\n            Laya.timer.once(this.liveTime, this, this.destroy);\r\n        }\r\n        this.setLoop(effect, this.bLoop);\r\n        this.callback && this.callback(effect);\r\n    }\r\n    destroy(destroyChild) {\r\n        this.effectNode.destroy();\r\n        super.destroy(destroyChild);\r\n    }\r\n    setLoop(node, b) {\r\n        for (var i = 0; i < node.numChildren; ++i) {\r\n            var childs = node.getChildAt(i);\r\n            if (childs instanceof ShuriKenParticle3D) {\r\n                childs.particleSystem.looping = b;\r\n            }\r\n            if (childs.numChildren > 0)\r\n                this.setLoop(childs, b);\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=Effect3D.js.map",
  "references": [
    "E:/project/duorou/client/src/manager/ResourceManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Effect3D.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../src/effect/Effect3D.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
