{
  "code": "var Handler = Laya.Handler;\r\nvar Sprite3D = Laya.Sprite3D;\r\nvar Vector3 = Laya.Vector3;\r\nvar Tween = Laya.Tween;\r\nimport GameScene from \"../scene/GameScene\";\r\nimport { ResourceManager } from \"../../manager/ResourceManager\";\r\nvar Pool = Laya.Pool;\r\nimport { Drop_Cfg } from \"../../manager/ConfigManager\";\r\nimport { Utils } from \"../../utils/Utils\";\r\nimport { SceneItemCreater } from \"./SceneItemCreater\";\r\nexport class SceneItem extends Sprite3D {\r\n    constructor() {\r\n        super();\r\n        this.itemModel = null;\r\n        this._tableId = 0;\r\n        this.index = 0;\r\n    }\r\n    init(tableId, position, handler, price = 1, ownerPos = 0) {\r\n        this._tableId = tableId;\r\n        this.ownerIndex = ownerPos;\r\n        this._tableData = Drop_Cfg[tableId];\r\n        this.pos = position;\r\n        this.addGold = price;\r\n        this._complate = handler;\r\n        if (!this.itemModel) {\r\n            this.loadModel();\r\n        }\r\n        else {\r\n            this.doMove();\r\n            handler();\r\n        }\r\n    }\r\n    loadModel() {\r\n        ResourceManager.getInstance().getResource(this._tableData.strmodel, Handler.create(this, this.onLoaded));\r\n    }\r\n    get tableId() {\r\n        return this._tableId;\r\n    }\r\n    onClick() {\r\n        Tween.to(this.transform.position, { y: this.transform.position.y + 2, update: new Handler(this, function () {\r\n                this.transform.position = this.transform.position;\r\n            }) }, 200, null);\r\n        Laya.timer.loop(50, this, this.onHide);\r\n    }\r\n    onHide() {\r\n        this._alpha -= 0.1;\r\n        Utils.setModelAlpha(this, this._alpha);\r\n        if (this._alpha <= 0) {\r\n            Laya.timer.clear(this, this.onHide);\r\n            SceneItemCreater.getInstance().removeItem(this);\r\n        }\r\n    }\r\n    recover() {\r\n        Pool.recover(\"SceneItem\" + this._tableId.toString(), this);\r\n    }\r\n    onLoaded(sp3d) {\r\n        this.itemModel = sp3d;\r\n        sp3d.transform.localPosition = new Vector3(0, 0.3, 0);\r\n        this.addChild(sp3d);\r\n        this.doMove();\r\n        this._complate();\r\n    }\r\n    doMove() {\r\n        this._alpha = 1;\r\n        Utils.setModelAlpha(this, 1);\r\n        this.transform.position = this.pos;\r\n        var _x = this.transform.position.x;\r\n        var _y = this.transform.position.y;\r\n        GameScene.instance.scene3d.addChild(this);\r\n        var offset = Math.random() * 0.8;\r\n        offset = Number(offset.toFixed(1));\r\n        Tween.to(this.transform.position, { x: _x - offset, y: _y + 1, update: new Handler(this, function () {\r\n                this.transform.position = this.transform.position;\r\n            }) }, 200, null, Handler.create(this, function () {\r\n            Tween.to(this.transform.position, { x: _x - offset * 2, y: _y, update: new Handler(this, function () {\r\n                    this.transform.position = this.transform.position;\r\n                }) }, 200, null, Handler.create(this, function () {\r\n            }));\r\n        }));\r\n    }\r\n    destroy(destroyChild) {\r\n        this.removeSelf();\r\n        Pool.recover(\"SceneItem\" + this._tableId.toString(), this);\r\n    }\r\n}\r\n//# sourceMappingURL=SceneItem.js.map",
  "references": [
    "E:/project/duorou/client/src/game/scene/GameScene.ts",
    "E:/project/duorou/client/src/manager/ResourceManager.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/game/item/SceneItemCreater.ts"
  ],
  "map": "{\"version\":3,\"file\":\"SceneItem.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/item/SceneItem.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
