{
  "code": "import { StaffBase } from \"./StaffBase\";\r\nimport { NpcManager } from \"../../manager/NpcManager\";\r\nimport GameScene from \"../scene/GameScene\";\r\nimport { ResourceManager } from \"../../manager/ResourceManager\";\r\nimport { AnimatorController } from \"../script/AnimatorController\";\r\nvar Handler = Laya.Handler;\r\nimport { GuideManager } from \"../ui/Guide/GuideManager\";\r\nimport { BubbleCreater } from \"../ui/Bubble/BubbleCreater\";\r\nexport var BubbleType;\r\n(function (BubbleType) {\r\n    BubbleType[BubbleType[\"publicity\"] = 2] = \"publicity\";\r\n    BubbleType[BubbleType[\"advertising\"] = 3] = \"advertising\";\r\n})(BubbleType || (BubbleType = {}));\r\nexport class Propagandist extends StaffBase {\r\n    constructor() {\r\n        super();\r\n        this._creating = true;\r\n        this.index = 0;\r\n    }\r\n    onLoad(tableId) {\r\n        super.onLoad(tableId);\r\n        ResourceManager.getInstance().getResource(this._tableData.strmodle, Handler.create(this, (node) => {\r\n            this.sprite3dNode = node;\r\n            this._animator = this.addComponent(AnimatorController);\r\n            this.addChild(this.sprite3dNode);\r\n            this._loadDone = true;\r\n        }));\r\n    }\r\n    onStop() { }\r\n    onDestroy() { }\r\n    LoadRangeNpc() {\r\n        this.creatNpc(BubbleType.publicity);\r\n    }\r\n    LoadRangetenNpc() {\r\n        if (!this._creating)\r\n            return;\r\n        this._creating = false;\r\n        NpcManager.getInstance().destroynpcCreater();\r\n        Laya.timer.loop(500, this, this.AddVisitorNpc);\r\n        let welcome = GameScene.instance.scene3d.getChildByName(\"Effect\").getChildByName(\"welcome\");\r\n        welcome.active = true;\r\n        Laya.timer.loop(3000, this, () => { welcome.active = false; });\r\n        this.index = 0;\r\n    }\r\n    AddVisitorNpc() {\r\n        this.index++;\r\n        if (this.index > this._tableData.propaganda) {\r\n            Laya.timer.clear(this, this.AddVisitorNpc);\r\n            this.index = 0;\r\n            this._creating = true;\r\n            if (GuideManager.getInstance().GetGuideState()) {\r\n                NpcManager.getInstance().initnpcCreater();\r\n            }\r\n            return;\r\n        }\r\n        this.creatNpc(BubbleType.advertising);\r\n    }\r\n    creatNpc(type) {\r\n        var f = Math.random() * (NpcManager.getInstance().npcCreater._Array.length - 1);\r\n        f = Math.round(f);\r\n        f = NpcManager.getInstance().npcCreater._Array[f];\r\n        var npc = NpcManager.getInstance().createNpc(f);\r\n        if (!npc)\r\n            return;\r\n        npc.transform.position = GameScene.instance.scene3d.getChildByName(\"path\").getChildByName(\"path_1\").getChildAt(0).transform.position;\r\n        let bubble = BubbleCreater.instance.createBubble(type, GameScene.instance.camera, 1, npc, null);\r\n        Laya.timer.once(2000, this, () => {\r\n            BubbleCreater.instance.removeBubble(bubble);\r\n        });\r\n        GameScene.instance.scene3d.addChild(npc);\r\n    }\r\n}\r\n//# sourceMappingURL=Propagandist.js.map",
  "references": [
    "E:/project/duorou/client/src/game/Staff/StaffBase.ts",
    "E:/project/duorou/client/src/manager/NpcManager.ts",
    "E:/project/duorou/client/src/game/scene/GameScene.ts",
    "E:/project/duorou/client/src/manager/ResourceManager.ts",
    "E:/project/duorou/client/src/game/script/AnimatorController.ts",
    "E:/project/duorou/client/src/game/ui/Guide/GuideManager.ts",
    "E:/project/duorou/client/src/game/ui/Bubble/BubbleCreater.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Propagandist.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/Staff/Propagandist.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
