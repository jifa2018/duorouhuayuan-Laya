{
  "code": "var Sprite3D = Laya.Sprite3D;\r\nvar Vector3 = Laya.Vector3;\r\nimport { DIYScene } from \"../scene/DIYScene\";\r\nvar Vector2 = Laya.Vector2;\r\nimport { ResourceManager } from \"../../manager/ResourceManager\";\r\nimport { Tree_Cfg } from \"../../manager/ConfigManager\";\r\nvar Handler = Laya.Handler;\r\nexport class Tree extends Sprite3D {\r\n    constructor(treeId, scale = 0, handler = null, bSave = true) {\r\n        super();\r\n        this._scale = null;\r\n        this._rotate = null;\r\n        this.isDrag = false;\r\n        this.isPlanted = false;\r\n        this.isSave = false;\r\n        this.baseScale = 1;\r\n        this.point = new Vector2();\r\n        this._initZoom = 1;\r\n        this.complate = handler;\r\n        this.init(treeId, scale, bSave);\r\n    }\r\n    init(treeId, scale, bSave = true) {\r\n        this._camera = DIYScene.instance.camera;\r\n        this._scene3d = DIYScene.instance.scene3d;\r\n        this._initZoom = Tree_Cfg[treeId].zoom;\r\n        this.quality = Tree_Cfg[treeId].point;\r\n        this._type = Tree_Cfg[treeId].type;\r\n        this.isSave = bSave;\r\n        this.baseScale = scale == 0 ? this._initZoom : scale;\r\n        this.minZoom = Tree_Cfg[treeId].zoommin * this._initZoom;\r\n        this.maxZoom = Tree_Cfg[treeId].zoommax * this._initZoom;\r\n        if (scale > 0)\r\n            this._initZoom = scale;\r\n        this.setScale(this._initZoom);\r\n        this.loadTree(treeId);\r\n    }\r\n    loadTree(treeId) {\r\n        if (!Tree_Cfg || !Tree_Cfg[treeId]) {\r\n            throw Error(\"tree is not found , id = \" + treeId);\r\n            return;\r\n        }\r\n        this._id = treeId;\r\n        ResourceManager.getInstance().getResource(Tree_Cfg[treeId].strmodelurl, Handler.create(this, function (ret) {\r\n            this.treeNode = ret;\r\n            this.addChild(ret);\r\n            this.setScale(this._initZoom);\r\n            this._rotate = 0;\r\n            this.complate && this.complate.runWith(this);\r\n        }));\r\n    }\r\n    getTableId() {\r\n        return this._id;\r\n    }\r\n    setScale(value) {\r\n        value = Number(value.toFixed(1));\r\n        if (this.transform)\r\n            this.transform.setWorldLossyScale(new Vector3(value, value, value));\r\n        this._scale = value;\r\n    }\r\n    getScale() {\r\n        return Number(this._scale.toFixed(1));\r\n    }\r\n    setRotate(value) {\r\n        this.transform.localRotationEuler = new Vector3(this.transform.localRotationEulerX, value, this.transform.localRotationEulerZ);\r\n        this._rotate = value;\r\n    }\r\n    getRotate() {\r\n        return this._rotate;\r\n    }\r\n    setPosition(v3) {\r\n        this.transform.position = v3;\r\n    }\r\n    getPosition() {\r\n        var pos = new Vector3();\r\n        pos.x = Number(this.transform.localPosition.x.toFixed(1));\r\n        pos.y = Number(this.transform.localPosition.y.toFixed(1));\r\n        pos.z = Number(this.transform.localPosition.z.toFixed(1));\r\n        return pos;\r\n    }\r\n    getPayBackNumber() {\r\n        if (this.isSave)\r\n            return 0;\r\n        if (this._scale <= this._initZoom)\r\n            return 1;\r\n        return 1;\r\n        return (this._scale - this._initZoom) * 10;\r\n    }\r\n    destroy(destroyChild) {\r\n        super.destroy(destroyChild);\r\n        this.treeNode = null;\r\n    }\r\n    removeSelf() {\r\n        debugger;\r\n        return super.removeSelf();\r\n    }\r\n}\r\n//# sourceMappingURL=Tree.js.map",
  "references": [
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/game/scene/DIYScene.ts",
    "E:/project/duorou/client/src/manager/ResourceManager.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/common/Debug.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Tree.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/item/Tree.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
