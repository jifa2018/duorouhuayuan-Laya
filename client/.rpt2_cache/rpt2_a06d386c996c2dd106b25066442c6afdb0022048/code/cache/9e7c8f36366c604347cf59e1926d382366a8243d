{
  "code": "import { Map_Cfg, Staff_Cfg } from \"../../manager/ConfigManager\";\r\nimport { Utils } from \"../../utils/Utils\";\r\nimport { GrassManager } from \"../../manager/GrassManager\";\r\nimport { PathManager } from \"../../manager/PathManager\";\r\nexport class CollectCreater {\r\n    constructor() {\r\n        this.path = new Array();\r\n        this.findData = {};\r\n    }\r\n    initCreater(mapId, staffId) {\r\n        this.staffData = Staff_Cfg[staffId];\r\n        this.mapData = Map_Cfg[mapId];\r\n        if (!this.mapData || !this.staffData) {\r\n            console.log(\"采集物品生成器创建失败\");\r\n            return;\r\n        }\r\n        this.createMinTime = this.mapData.minimumtime;\r\n        this.createMaxTime = this.mapData.maxtime;\r\n        this.randomCreateItem();\r\n    }\r\n    getFindItemData() {\r\n        return Object.assign({}, this.findData);\r\n    }\r\n    clearFindItemData() {\r\n        this.findData = {};\r\n    }\r\n    randomCreateItem() {\r\n        var time = Math.random() * (this.createMaxTime - this.createMinTime) + this.createMinTime;\r\n        Laya.timer.once(time * 1000, this, this.onGetTree);\r\n    }\r\n    onGetTree() {\r\n        this.randomCreateItem();\r\n        if (this.findData == {})\r\n            return;\r\n        var _data = GrassManager.getInstance().getMapData(1);\r\n        var curLevel = GrassManager.getInstance().GetCurrentLv();\r\n        curLevel = curLevel == 0 ? 10 : curLevel;\r\n        var rLevel = Math.floor(Math.random() * (curLevel + 1) + 1);\r\n        rLevel = rLevel > curLevel ? curLevel : rLevel;\r\n        this.mapData = _data[rLevel];\r\n        var mapItem = this.mapData.strdrop + \"|\" + this.mapData.strSidgroup;\r\n        var mapWeight = this.mapData.strCweight + \"|\" + this.mapData.strSweight;\r\n        var arrItem = mapItem.split(\"|\");\r\n        var arrWeight = mapWeight.split(\"|\");\r\n        let nNum = Utils.getWeight(arrWeight);\r\n        var itemId = (arrItem[nNum]);\r\n        var area = this.checkArea(itemId, _data);\r\n        var fPos;\r\n        var fArea = area;\r\n        if (area == -1) {\r\n            var _area = Math.floor(Math.random() * 9) + 1;\r\n            _area = _area == 10 ? 9 : _area;\r\n            var arrGroup = PathManager.getInstance().growCommonArray[1];\r\n            var arrPoint = arrGroup[_area];\r\n            fArea = _area;\r\n            if (arrPoint.length > 1) {\r\n                var _r = Math.floor(Math.random() * arrPoint.length);\r\n                _r = arrPoint.length == _r ? _r - 1 : _r;\r\n                fPos = arrPoint[_r];\r\n            }\r\n            else if (arrPoint.length == 1) {\r\n                fPos = arrPoint[0];\r\n            }\r\n        }\r\n        else {\r\n            var arrGroup = PathManager.getInstance().growSpecialArray[1];\r\n            fPos = arrGroup[area];\r\n        }\r\n        this.findData[\"itemId\"] = itemId;\r\n        this.findData[\"pos\"] = fPos;\r\n        this.findData[\"area\"] = fArea;\r\n        this.findData[\"special\"] = (area != -1);\r\n    }\r\n    checkArea(itemId, mapData) {\r\n        for (var o in mapData) {\r\n            if (mapData[o].unlockID == itemId)\r\n                return Number(o);\r\n        }\r\n        return -1;\r\n    }\r\n    clear() {\r\n        Laya.timer.clear(this, this.onGetTree);\r\n        this.mapData = null;\r\n        this.staffData = null;\r\n        this.findData = {};\r\n    }\r\n}\r\n//# sourceMappingURL=CollectCreater.js.map",
  "references": [
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/manager/GrassManager.ts",
    "E:/project/duorou/client/src/manager/PathManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"CollectCreater.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/component/CollectCreater.ts\"],\"names\":[],\"mappings\":\"AAOA,OAAO,EAAyB,OAAO,EAAE,SAAS,EAAC,MAAM,6BAA6B,CAAC;AACvF,OAAO,EAAC,KAAK,EAAC,MAAM,mBAAmB,CAAC;AACxC,OAAO,EAAC,YAAY,EAAC,MAAM,4BAA4B,CAAC;AACxD,OAAO,EAAC,WAAW,EAAC,MAAM,2BAA2B,CAAC;AAEtD,MAAM,OAAO,cAAc;IAA3B;QAEY,SAAI,GAAkB,IAAI,KAAK,EAAW,CAAC;QAM3C,aAAQ,GAAG,EAAE,CAAC;IAkI1B,CAAC;IA3HU,WAAW,CAAC,KAAY,EAAE,OAAc;QAE3C,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,CAAC;QACpC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;QAC9B,IAAG,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,SAAS,EACnC;YACI,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;YAC3B,OAAO;SACV;QAED,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;QAC9C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC;QAE1C,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC5B,CAAC;IAKM,eAAe;QAElB,OAAO,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC5C,CAAC;IAKM,iBAAiB;QAEpB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;IAKO,gBAAgB;QAEpB,IAAI,IAAI,GAAU,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC;QACjG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;IAEvD,CAAC;IAKO,SAAS;QAEb,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,IAAG,IAAI,CAAC,QAAQ,IAAI,EAAE;YAAG,OAAO;QAChC,IAAI,KAAK,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;QAErD,IAAI,QAAQ,GAAG,YAAY,CAAC,WAAW,EAAE,CAAC,YAAY,EAAE,CAAC;QACzD,QAAQ,GAAG,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC;QAEzC,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,QAAQ,GAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAC1D,MAAM,GAAG,MAAM,GAAG,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC;QAC/C,IAAI,CAAC,OAAO,GAAE,KAAK,CAAC,MAAM,CAAC,CAAC;QAE5B,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC;QACpE,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC;QAExE,IAAI,OAAO,GAAiB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC/C,IAAI,SAAS,GAAiB,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAEnD,IAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;QACtC,IAAI,MAAM,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;QAE7B,IAAI,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;QACzC,IAAI,IAAY,CAAC;QACjB,IAAI,KAAK,GAAG,IAAI,CAAC;QACjB,IAAG,IAAI,IAAI,CAAC,CAAC,EACb;YAEI,IAAI,KAAK,GAAU,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;YACrD,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAChC,IAAI,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;YAC5D,IAAI,QAAQ,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC/B,KAAK,GAAG,KAAK,CAAC;YACd,IAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EACtB;gBACI,IAAI,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAA;gBACpD,EAAE,GAAG,QAAQ,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC,EAAE,GAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBACvC,IAAI,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;aACvB;iBAAK,IAAG,QAAQ,CAAC,MAAM,IAAI,CAAC,EAC7B;gBACI,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;aACtB;SACJ;aAED;YAGI,IAAI,QAAQ,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC;YAC7D,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;SACzB;QAED,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,MAAM,CAAC;QACjC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;QAC5B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;IAE5C,CAAC;IAEO,SAAS,CAAC,MAAU,EAAE,OAAW;QAErC,KAAI,IAAI,CAAC,IAAI,OAAO,EACpB;YACI,IAAG,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,IAAI,MAAM;gBAChC,OAAO,MAAM,CAAC,CAAC,CAAC,CAAC;SACpB;QACD,OAAO,CAAC,CAAC,CAAC;IACd,CAAC;IAKM,KAAK;QAER,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QACvC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAE;QACrB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAE;QACvB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;IACvB,CAAC;CACJ\"}"
}
