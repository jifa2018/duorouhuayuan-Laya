{
  "code": "import SceneBase from \"./SceneBase\";\r\nvar Handler = Laya.Handler;\r\nimport MouseController from \"../script/MouseController\";\r\nimport { Utils } from \"../../utils/Utils\";\r\nvar Vector3 = Laya.Vector3;\r\nvar ShadowMode = Laya.ShadowMode;\r\nimport { GameUIManager } from \"../../manager/GameUIManager\";\r\nimport { DiyView } from \"../ui/DiyView/DiyView\";\r\nimport { LoadingScenes } from \"../ui/LoadingScenes\";\r\nexport default class ViewScene extends SceneBase {\r\n    constructor() {\r\n        super();\r\n    }\r\n    static get instance() {\r\n        if (!ViewScene._instance)\r\n            ViewScene._instance = new ViewScene();\r\n        return ViewScene._instance;\r\n    }\r\n    showScene(param, handler) {\r\n        super.showScene(param, handler);\r\n        if (!this.scene3d || !this.sceneLoaded) {\r\n            Laya.loader.create(\"res/scene/viewscene/Scenes_duorou.ls\", Handler.create(this, this.onSceneLoaded, [handler]));\r\n        }\r\n        else {\r\n            this.addChild(this.scene3d);\r\n        }\r\n    }\r\n    onSceneLoaded(handler, scene3d) {\r\n        this.addChild(scene3d);\r\n        if (!this.camera) {\r\n            this.light = scene3d.getChildByName(\"Spot Light (1)\");\r\n            this.ground = scene3d.getChildByName(\"Object\").getChildByName(\"dimian\");\r\n            this.ground.meshRenderer.receiveShadow = true;\r\n            this.camera = scene3d._cameraPool[0];\r\n            this.script3d = this.camera.addComponent(MouseController);\r\n            this.scene3d = scene3d;\r\n            this.script3d.rotateEnable = true;\r\n            this.script3d.moveEnable = false;\r\n            this.script3d.scaleEnable = true;\r\n            Utils.createBloom(this.camera, { intensity: 4, threshold: 1.1, softKnee: 0.5, clamp: 65472, diffusion: 5, anamorphicRatio: 0.0, color: new Laya.Color(1, 0.84, 0, 1), fastMode: true });\r\n            this.loadPlant();\r\n        }\r\n        else {\r\n            Laya.timer.once(2000, this, function () {\r\n                GameUIManager.getInstance().hideUI(LoadingScenes);\r\n            });\r\n        }\r\n    }\r\n    loadPlant() {\r\n        Laya.loader.create(\"res/plant/Succulent_zu01.lh\", Handler.create(this, function (sp3d) {\r\n            sp3d = sp3d.clone();\r\n            sp3d.transform.position = new Vector3(0, -0.2, 0);\r\n            sp3d.transform.rotationEuler = new Vector3(0, 0, 0);\r\n            this.scene3d.addChild(sp3d);\r\n            Utils.setMeshCastShadow(sp3d, true);\r\n            this.script3d.setCameraCenter(sp3d);\r\n            this.script3d.setTarget(sp3d);\r\n            this.light.shadowMode = ShadowMode.Hard;\r\n            this.light.shadowDistance = 4;\r\n            this.light.shadowResolution = 1024;\r\n            this.light.shadowDepthBias = 1.0;\r\n            this.light.shadowStrength = 0.6;\r\n            this.light.shadowNearPlane = 0.001;\r\n            Laya.timer.once(2000, this, function () {\r\n                GameUIManager.getInstance().hideUI(LoadingScenes);\r\n                GameUIManager.getInstance().showUI(DiyView);\r\n            });\r\n        }));\r\n    }\r\n}\r\nViewScene._instance = null;\r\n//# sourceMappingURL=ViewScene.js.map",
  "references": [
    "E:/project/duorou/client/src/game/scene/SceneBase.ts",
    "E:/project/duorou/client/src/game/script/MouseController.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/manager/GameUIManager.ts",
    "E:/project/duorou/client/src/game/ui/DiyView/DiyView.ts",
    "E:/project/duorou/client/src/game/ui/LoadingScenes.ts"
  ],
  "map": "{\"version\":3,\"file\":\"ViewScene.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/scene/ViewScene.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,SAAS,MAAM,aAAa,CAAC;AACpC,IAAO,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC9B,OAAO,eAAe,MAAM,2BAA2B,CAAC;AACxD,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAE1C,IAAO,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;AAC9B,IAAO,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;AAIpC,OAAO,EAAE,aAAa,EAAE,MAAM,6BAA6B,CAAC;AAC5D,OAAO,EAAE,OAAO,EAAE,MAAM,uBAAuB,CAAC;AAChD,OAAO,EAAE,aAAa,EAAE,MAAM,qBAAqB,CAAC;AAEpD,MAAM,CAAC,OAAO,OAAO,SAAU,SAAQ,SAAS;IAO5C;QACI,KAAK,EAAE,CAAC;IACZ,CAAC;IAEM,MAAM,KAAK,QAAQ;QACtB,IAAI,CAAC,SAAS,CAAC,SAAS;YACpB,SAAS,CAAC,SAAS,GAAG,IAAI,SAAS,EAAE,CAAC;QAC1C,OAAO,SAAS,CAAC,SAAS,CAAC;IAC/B,CAAC;IAEM,SAAS,CAAC,KAAU,EAAE,OAAgB;QAEzC,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACpC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,sCAAsC,EAAE,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;SAClH;aACI;YACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC/B;IAGL,CAAC;IAOO,aAAa,CAAC,OAAgB,EAAE,OAAgB;QAEpD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QACvB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACd,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,cAAc,CAAC,gBAAgB,CAAmB,CAAC;YACxE,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAiB,CAAC;YAIxF,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,GAAG,IAAI,CAAC;YAE9C,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;YACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;YAE1D,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,IAAI,CAAC;YAClC,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;YACjC,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,IAAI,CAAC;YAEjC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,CAAC,EAAE,eAAe,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;YAGxL,IAAI,CAAC,SAAS,EAAE,CAAA;SACnB;aACI;YACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE;gBACxB,aAAa,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YACtD,CAAC,CAAC,CAAA;SACL;IAIL,CAAC;IAEO,SAAS;QACb,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,6BAA6B,EAAE,OAAO,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,IAAc;YAI3F,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;YACpB,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,SAAS,CAAC,aAAa,GAAG,IAAI,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAGpD,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YAE5B,KAAK,CAAC,iBAAiB,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACpC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAG9B,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,UAAU,CAAC,IAAI,CAAC;YAExC,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,gBAAgB,GAAG,IAAI,CAAC;YACnC,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,GAAG,CAAC;YACjC,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,GAAG,CAAC;YAC/B,IAAI,CAAC,KAAwB,CAAC,eAAe,GAAG,KAAK,CAAC;YAUvD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,EAAE;gBACxB,aAAa,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;gBAElD,aAAa,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;YAC/C,CAAC,CAAC,CAAA;QACN,CAAC,CAAC,CAAC,CAAA;IAEP,CAAC;;AAvGc,mBAAS,GAAG,IAAI,CAAC\"}"
}
