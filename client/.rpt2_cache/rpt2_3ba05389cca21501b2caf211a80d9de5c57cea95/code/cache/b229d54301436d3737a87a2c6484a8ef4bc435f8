{
  "code": "import { ui } from \"../../../ui/layaMaxUI\";\r\nimport { GameUIManager } from \"../../../manager/GameUIManager\";\r\nimport { Succulent_Cfg, ConfigManager } from \"../../../manager/ConfigManager\";\r\nimport { BagSystem } from \"../../bag/BagSystem\";\r\nimport { CommonDefine } from \"../../../common/CommonDefine\";\r\nimport { ItemInfoView } from \"../Common/ItemInfoView\";\r\nimport { Player } from \"../../player/Player\";\r\nexport class HandBookView extends ui.view.HandBookViewUI {\r\n    constructor() {\r\n        super();\r\n        this._dArr = [];\r\n        this.Allarr = [];\r\n        this.alltab = [1,];\r\n        this.seletab = 0;\r\n        this.curselect = 0;\r\n        this._potData = [];\r\n        this._duorouArr = [];\r\n        this._zhuangshiArr = [];\r\n    }\r\n    onEnable() {\r\n        this.width = Laya.stage.width;\r\n        this.height = Laya.stage.height;\r\n        this.itemlist.renderHandler = new Laya.Handler(this, this.SetItemInfo);\r\n        this._duorouArr = BagSystem.getInstance().getItemByType(CommonDefine.SUCCULENT_TYPE_DUOROU);\r\n        this._zhuangshiArr = BagSystem.getInstance().getItemByType(CommonDefine.SUCCULENT_TYPE_ZHUANGSHI);\r\n        this.Allarr = ConfigManager.prototype.GetJsonToArray(Succulent_Cfg);\r\n        let curtype = 1;\r\n        this.Allarr.forEach(element => {\r\n            if (element.type != curtype) {\r\n                this.alltab.push(element.type);\r\n                curtype = element.type;\r\n            }\r\n        });\r\n        this.SetButton(this.seletab);\r\n        this.onInit();\r\n        this.onEvent();\r\n        this.itemlist.vScrollBarSkin = \"\";\r\n    }\r\n    onDisable() {\r\n        this.offAll();\r\n    }\r\n    SetButton(index) {\r\n        for (let i = 0; i < 3; i++) {\r\n            let btn = this[\"btn\" + i];\r\n            if (i == index) {\r\n                btn.skin = \"gameui/handbook/\" + \"tab\" + i + \"_2.png\";\r\n            }\r\n            else {\r\n                btn.skin = \"gameui/handbook/\" + \"tab\" + i + \"_1.png\";\r\n            }\r\n        }\r\n        this.seletab = index;\r\n        this._dArr = [];\r\n        this.Allarr.forEach(element => {\r\n            if (element.type == this.alltab[index]) {\r\n                this._dArr.push(element.id);\r\n            }\r\n        });\r\n        if (index == 0) {\r\n            this.dec.text = \"多肉\";\r\n        }\r\n        else if (index == 1) {\r\n            this.dec.text = \"玩具\";\r\n        }\r\n        else if (index == 2) {\r\n            this.dec.text = \"花盆\";\r\n        }\r\n        this.itemlist.array = this._dArr;\r\n    }\r\n    onInit() {\r\n    }\r\n    onEvent() {\r\n        for (let i = 0; i < 4; i++) {\r\n            let btn = this[\"btn\" + i];\r\n            btn.on(Laya.Event.CLICK, this, this.SetButton, [i]);\r\n        }\r\n        this.btn_close.on(Laya.Event.CLICK, this, function () {\r\n            GameUIManager.getInstance().hideUI(HandBookView);\r\n        });\r\n    }\r\n    SetItemInfo(box, index) {\r\n        let bg = box.getChildByName(\"bg\");\r\n        if (index % 4 == 0) {\r\n            bg.visible = true;\r\n        }\r\n        let icon = box.getChildByName(\"good_pic\");\r\n        let name = box.getChildByName(\"label_name\");\r\n        let GoodNum = box.getChildByName(\"good_num\");\r\n        let boxnum = box.getChildByName(\"boxnum\");\r\n        icon.skin = Succulent_Cfg[this._dArr[index]][\"striconurl\"];\r\n        icon.gray = true;\r\n        let tempname = \"???\";\r\n        let bparr = null;\r\n        GoodNum.text = \"\";\r\n        boxnum.removeChildren();\r\n        if (this.seletab != 1) {\r\n            bparr = BagSystem.getInstance().getItemByType(this.alltab[this.seletab]);\r\n            for (let i in bparr) {\r\n                if (bparr[i].itemId == this._dArr[index]) {\r\n                    tempname = Succulent_Cfg[this._dArr[index]][\"strname\"];\r\n                    icon.gray = false;\r\n                    GoodNum.text = bparr[i].itemNum;\r\n                    let st = GoodNum.text.length;\r\n                    for (let index = 0; index < st; index++) {\r\n                        const str = Number(GoodNum.text[index]);\r\n                        let c = this.getCurClipNumer(boxnum, str, index);\r\n                        boxnum.addChild(c);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            bparr = Player.getInstance().tPotData;\r\n            if (bparr) {\r\n                for (let j in bparr) {\r\n                    if (j == this._dArr[index]) {\r\n                        tempname = Succulent_Cfg[this._dArr[index]][\"strname\"];\r\n                        icon.gray = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        name.text = tempname;\r\n        box.on(Laya.Event.CLICK, this, this.ClickItem, [index]);\r\n    }\r\n    ClickItem(index) {\r\n        this.curselect = index;\r\n        GameUIManager.getInstance().createUI(ItemInfoView, this._dArr[index]);\r\n    }\r\n    getCurClipNumer(offsetTarget, n, index) {\r\n        let clip = new Laya.Clip(\"gameui/main/number.png\", 10, 1);\r\n        clip.index = n;\r\n        clip.pos(index * 16, 0);\r\n        return clip;\r\n    }\r\n}\r\n//# sourceMappingURL=HandBookView.js.map",
  "references": [
    "E:/project/duorou/client/src/ui/layaMaxUI.ts",
    "E:/project/duorou/client/src/manager/GameUIManager.ts",
    "E:/project/duorou/client/src/manager/StaffManager.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/game/GameDefine.ts",
    "E:/project/duorou/client/src/common/TImer.ts",
    "E:/project/duorou/client/src/game/bag/BagSystem.ts",
    "E:/project/duorou/client/src/common/CommonDefine.ts",
    "E:/project/duorou/client/src/common/Debug.ts",
    "E:/project/duorou/client/src/game/ui/Common/StaffInfo.ts",
    "E:/project/duorou/client/src/game/ui/Common/ItemInfoView.ts",
    "E:/project/duorou/client/src/game/player/Player.ts",
    "E:/project/duorou/client/src/manager/PotManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"HandBookView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/game/ui/HandBook/HandBookView.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
