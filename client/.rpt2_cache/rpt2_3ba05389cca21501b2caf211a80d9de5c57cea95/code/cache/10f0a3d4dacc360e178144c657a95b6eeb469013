{
  "code": "import { Singleton } from \"../../common/Singleton\";\r\nimport { CommonDefine } from \"../../common/CommonDefine\";\r\nimport { SaveManager, ModelStorage } from \"../../manager/SaveManager\";\r\nexport class Player extends Singleton {\r\n    constructor() {\r\n        super();\r\n        this.nGold = 100;\r\n        this.nStar = 10;\r\n        this.sName = \"\";\r\n        this.tPotData = {};\r\n        this.initData();\r\n    }\r\n    initData() {\r\n        let _data = SaveManager.getInstance().GetCache(ModelStorage.Player);\r\n        if (!_data) {\r\n            _data = {};\r\n            _data[\"star\"] = this.nStar ? this.nStar : 10;\r\n            _data[\"gold\"] = this.nGold ? this.nGold : 100;\r\n        }\r\n        else {\r\n            this.nStar = _data.star;\r\n            this.nGold = _data.gold;\r\n        }\r\n        this.nAttraction = _data.attraction;\r\n        this.tPotData = _data.potData || {};\r\n        this.refreshStorage();\r\n    }\r\n    refreshStorage() {\r\n        let _data = {};\r\n        _data[\"star\"] = this.nStar;\r\n        _data[\"gold\"] = this.nGold;\r\n        _data[\"name\"] = this.sName;\r\n        _data[\"potData\"] = this.tPotData;\r\n        SaveManager.getInstance().SetPlayerCache(_data);\r\n        Laya.stage.event(CommonDefine.EVENT_MAIN_REFRESH);\r\n    }\r\n    refreshStar(v) {\r\n        this.nStar += v;\r\n        this.refreshStorage();\r\n    }\r\n    refreshGold(v) {\r\n        this.nGold += v;\r\n        this.refreshStorage();\r\n    }\r\n    canPayGold(value) {\r\n        return this.nGold - value >= 0;\r\n    }\r\n    refreshPotData(v, flag) {\r\n        this.tPotData[v] = flag;\r\n        this.refreshStorage();\r\n    }\r\n    setName(name) {\r\n        this.sName = name;\r\n    }\r\n}\r\n//# sourceMappingURL=Player.js.map",
  "references": [
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/game/GameDefine.ts",
    "E:/project/duorou/client/src/common/Singleton.ts",
    "E:/project/duorou/client/src/common/CommonDefine.ts",
    "E:/project/duorou/client/src/manager/SaveManager.ts",
    "E:/project/duorou/client/src/game/Login/GameLink.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Player.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/player/Player.ts\"],\"names\":[],\"mappings\":\"AAMA,OAAO,EAAE,SAAS,EAAE,MAAM,wBAAwB,CAAC;AACnD,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AACzD,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAItE,MAAM,OAAO,MAAO,SAAQ,SAAS;IAQjC;QACI,KAAK,EAAE,CAAC;QARL,UAAK,GAAW,GAAG,CAAC;QACpB,UAAK,GAAW,EAAE,CAAC;QAElB,UAAK,GAAW,EAAE,CAAC;QAEpB,aAAQ,GAAuC,EAAE,CAAC;QAIrD,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAED,QAAQ;QACJ,IAAI,KAAK,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACpE,IAAI,CAAC,KAAK,EAAE;YAER,KAAK,GAAG,EAAE,CAAC;YACX,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAA;YAC5C,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAA;SAChD;aAED;YACI,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;YACxB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC;SAC3B;QACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC;QACpC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC;QACpC,IAAI,CAAC,cAAc,EAAE,CAAC;IAE1B,CAAC;IAKD,cAAc;QAEV,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;QAC3B,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;QAC3B,KAAK,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;QAC3B,KAAK,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QACjC,WAAW,CAAC,WAAW,EAAE,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;QAChD,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;IAEtD,CAAC;IAIM,WAAW,CAAC,CAAS;QACxB,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAIM,WAAW,CAAC,CAAS;QACxB,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;QAChB,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAEM,UAAU,CAAC,KAAa;QAC3B,OAAO,IAAI,CAAC,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;IACnC,CAAC;IAKD,cAAc,CAAC,CAAS,EAAE,IAAa;QACnC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAGD,OAAO,CAAC,IAAY;QAChB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACtB,CAAC;CAGJ\"}"
}
