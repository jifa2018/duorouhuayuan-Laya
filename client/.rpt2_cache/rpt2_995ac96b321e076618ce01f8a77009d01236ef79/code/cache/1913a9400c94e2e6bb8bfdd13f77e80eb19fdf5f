{
  "code": "import { ui } from \"../../../ui/layaMaxUI\";\r\nimport { GameUIManager } from \"../../../manager/GameUIManager\";\r\nimport { Succulent_Cfg, ConfigManager, Succulentpoint_Cfg } from \"../../../manager/ConfigManager\";\r\nimport { BagSystem } from \"../../bag/BagSystem\";\r\nimport { ItemInfoView } from \"../Common/ItemInfoView\";\r\nimport { Player } from \"../../player/Player\";\r\nexport class HandBookView extends ui.view.HandBookViewUI {\r\n    constructor() {\r\n        super();\r\n        this._dArr = [];\r\n        this.Allarr = [];\r\n        this.alltab = [1,];\r\n        this.seletab = 0;\r\n        this.curselect = 0;\r\n        this._potData = [];\r\n    }\r\n    onEnable() {\r\n        this.width = Laya.stage.width;\r\n        this.height = Laya.stage.height;\r\n        this.itemlist.renderHandler = new Laya.Handler(this, this.SetItemInfo);\r\n        this.itemlist.selectEnable = true;\r\n        this.itemlist.mouseHandler = new Laya.Handler(this, this.ClickItem);\r\n        this.Allarr = ConfigManager.prototype.GetJsonToArray(Succulent_Cfg);\r\n        let curtype = 1;\r\n        this.Allarr.forEach(element => {\r\n            if (element.type != curtype) {\r\n                this.alltab.push(element.type);\r\n                curtype = element.type;\r\n            }\r\n        });\r\n        this.SetButton(this.seletab);\r\n        this.onInit();\r\n        this.onEvent();\r\n        this.itemlist.vScrollBarSkin = \"\";\r\n    }\r\n    onDisable() {\r\n        this.offAll();\r\n    }\r\n    SetButton(index) {\r\n        for (let i = 0; i < 3; i++) {\r\n            let btn = this[\"btn\" + i];\r\n            if (i == index) {\r\n                btn.skin = \"gameui/handbook/\" + \"tab\" + i + \"_2.png\";\r\n            }\r\n            else {\r\n                btn.skin = \"gameui/handbook/\" + \"tab\" + i + \"_1.png\";\r\n            }\r\n        }\r\n        this.seletab = index;\r\n        this._dArr = [];\r\n        this.Allarr.forEach(element => {\r\n            if (element.type == this.alltab[index]) {\r\n                this._dArr.push(element.id);\r\n            }\r\n        });\r\n        if (index == 0) {\r\n            this.dec.text = \"多肉\";\r\n        }\r\n        else if (index == 1) {\r\n            this.dec.text = \"花盆\";\r\n        }\r\n        else if (index == 2) {\r\n            this.dec.text = \"玩具\";\r\n        }\r\n        this.itemlist.array = this._dArr;\r\n    }\r\n    onInit() {\r\n    }\r\n    onEvent() {\r\n        for (let i = 0; i < 4; i++) {\r\n            let btn = this[\"btn\" + i];\r\n            btn.on(Laya.Event.CLICK, this, this.SetButton, [i]);\r\n        }\r\n        this.btn_close.on(Laya.Event.CLICK, this, function () {\r\n            GameUIManager.getInstance().hideUI(HandBookView);\r\n        });\r\n    }\r\n    SetItemInfo(box, index) {\r\n        let bg = box.getChildByName(\"bg\");\r\n        if (index % 4 == 0) {\r\n            bg.visible = true;\r\n        }\r\n        let icon = box.getChildByName(\"good_pic\");\r\n        let name = box.getChildByName(\"label_name\");\r\n        icon.skin = Succulent_Cfg[this._dArr[index]][\"striconurl\"];\r\n        icon.gray = true;\r\n        let tempname = \"???\";\r\n        let bparr = null;\r\n        if (this.seletab != 1) {\r\n            bparr = BagSystem.getInstance().getItemByType(this.alltab[this.seletab]);\r\n            for (let i in bparr) {\r\n                if (bparr[i].itemId == this._dArr[index]) {\r\n                    tempname = Succulent_Cfg[this._dArr[index]][\"strname\"];\r\n                    icon.gray = false;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            bparr = Player.getInstance().tPotData;\r\n            if (bparr) {\r\n                for (let j in bparr) {\r\n                    if (j == this._dArr[index]) {\r\n                        tempname = Succulent_Cfg[this._dArr[index]][\"strname\"];\r\n                        icon.gray = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        name.text = tempname;\r\n    }\r\n    ClickItem(event, index) {\r\n        if (event.type == \"mousedown\") {\r\n            this.curselect = index;\r\n            GameUIManager.getInstance().createUI(ItemInfoView, this._dArr[index]);\r\n        }\r\n    }\r\n    UpdatePotData(id) {\r\n        let _data = Succulentpoint_Cfg[id].flowerpot;\r\n        let _arr = [];\r\n        if (Object.keys(_data).length > 0) {\r\n            for (const key in _data) {\r\n                if (Object.prototype.hasOwnProperty.call(_data, key)) {\r\n                    const element = _data[key];\r\n                    let eItem = Succulent_Cfg[element];\r\n                    eItem.id = element;\r\n                    if (Player.getInstance().tPotData[eItem.id]) {\r\n                        _arr.push(eItem);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let eItem = Succulent_Cfg[_data];\r\n            eItem.id = _data;\r\n            _arr.push(eItem);\r\n        }\r\n        if (this._potData) {\r\n            for (let i in _arr) {\r\n                if (this._potData.indexOf(_arr[i]) != -1) {\r\n                }\r\n                else {\r\n                    this._potData.push(_arr[i]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._potData = _arr;\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=HandBookView.js.map",
  "references": [
    "E:/project/duorou/client/src/ui/layaMaxUI.ts",
    "E:/project/duorou/client/src/manager/GameUIManager.ts",
    "E:/project/duorou/client/src/manager/StaffManager.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/game/GameDefine.ts",
    "E:/project/duorou/client/src/common/TImer.ts",
    "E:/project/duorou/client/src/game/bag/BagSystem.ts",
    "E:/project/duorou/client/src/common/CommonDefine.ts",
    "E:/project/duorou/client/src/common/Debug.ts",
    "E:/project/duorou/client/src/game/ui/Common/StaffInfo.ts",
    "E:/project/duorou/client/src/game/ui/Common/ItemInfoView.ts",
    "E:/project/duorou/client/src/game/player/Player.ts",
    "E:/project/duorou/client/src/manager/PotManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"HandBookView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/game/ui/HandBook/HandBookView.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
