{
  "code": "import { ui } from \"../../../ui/layaMaxUI\";\r\nimport { GameUIManager } from \"../../../manager/GameUIManager\";\r\nimport { Succulentpoint_Cfg, Succulent_Cfg } from \"../../../manager/ConfigManager\";\r\nimport { Player } from \"../../player/Player\";\r\nimport { Utils } from \"../../../utils/Utils\";\r\nimport { FlowerpotTipsView } from \"./FlowerpotTipsView\";\r\nexport class FlowerpotSelView extends ui.view.Flowerpot.FlowerpotSelViewUI {\r\n    constructor(pointName) {\r\n        super();\r\n        this._pointName = \"\";\r\n        this._pointIndex = 0;\r\n        this._potData = [];\r\n        this._pointName = pointName[0];\r\n        this._pointIndex = pointName[1];\r\n    }\r\n    onEnable() {\r\n        this.width = Laya.stage.width;\r\n        this.height = Laya.stage.height;\r\n        this.InitEvent();\r\n        this.InitView();\r\n    }\r\n    onDisable() {\r\n    }\r\n    onClose() {\r\n        GameUIManager.getInstance().destroyUI(FlowerpotSelView);\r\n    }\r\n    InitEvent() {\r\n        this.closeBtn.on(Laya.Event.CLICK, this, this.onClose);\r\n    }\r\n    InitView() {\r\n        this.SetPotList();\r\n    }\r\n    UpdatePotData() {\r\n        if (!this._pointName)\r\n            return;\r\n        let _data = Succulentpoint_Cfg[this._pointName].flowerpot;\r\n        let _arr = [];\r\n        if (Object.keys(_data).length > 0) {\r\n            for (const key in _data) {\r\n                if (Object.prototype.hasOwnProperty.call(_data, key)) {\r\n                    const element = _data[key];\r\n                    let eItem = Succulent_Cfg[element];\r\n                    eItem.id = element;\r\n                    _arr.push(eItem);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let eItem = Succulent_Cfg[_data];\r\n            eItem.id = _data;\r\n            _arr.push(eItem);\r\n        }\r\n        this._potData = _arr;\r\n        function SortFun(tLeft, tRight) {\r\n            let nleftLock = Player.getInstance().tPotData[tLeft.id] ? 1 : 0;\r\n            let nRightLock = Player.getInstance().tPotData[tRight.id] ? 1 : 0;\r\n            if (nleftLock != nRightLock)\r\n                return nleftLock > nRightLock ? -1 : 1;\r\n            let nleftcan = (Player.getInstance().nStar >= Succulent_Cfg[tLeft.id].unlockstar && Player.getInstance().nGold >= Succulent_Cfg[tLeft.id].gold) ? 1 : 0;\r\n            let nRightcan = (Player.getInstance().nStar >= Succulent_Cfg[tRight.id].unlockstar && Player.getInstance().nGold >= Succulent_Cfg[tRight.id].gold) ? 1 : 0;\r\n            if (nleftcan != nRightcan)\r\n                return nleftcan > nRightcan ? -1 : 1;\r\n            return tLeft.id < tRight.id ? -1 : 1;\r\n        }\r\n        this._potData.sort(SortFun);\r\n    }\r\n    SetPotList() {\r\n        this.UpdatePotData();\r\n        this.potList.array = this._potData;\r\n        this.potList.renderHandler = new Laya.Handler(this, this.renderHandler);\r\n        this.potList.vScrollBarSkin = \"\";\r\n    }\r\n    renderHandler(item, index) {\r\n        let tPot = item.getChildByName(\"img_pot\");\r\n        let tVolume = item.getChildByName(\"la_volume\");\r\n        let tLockCon = item.getChildByName(\"la_lockcon\");\r\n        let tunLockCon = item.getChildByName(\"la_unlockcon\");\r\n        let tBg = item.getChildByName(\"img_bg\");\r\n        tPot.skin = this._potData[index].striconurl;\r\n        tVolume.text = Utils.format(\"容量:{0}\", this._potData[index].capacity || 0);\r\n        tLockCon.visible = false;\r\n        tunLockCon.visible = false;\r\n        tPot.disabled = false;\r\n        tBg.visible = index % 3 == 0;\r\n        if (!(Player.getInstance().tPotData[this._potData[index].id])) {\r\n            if (this.GetPotIsCanUnLock(this._potData[index].id)) {\r\n                tLockCon.visible = true;\r\n            }\r\n            else {\r\n                tPot.disabled = true;\r\n                tunLockCon.visible = true;\r\n            }\r\n        }\r\n        item.on(Laya.Event.CLICK, this, this.OnClickPot, [index]);\r\n    }\r\n    OnClickPot(index) {\r\n        let potId = this._potData[index].id;\r\n        GameUIManager.getInstance().createUI(FlowerpotTipsView, [this._pointName, this._pointIndex, potId]);\r\n    }\r\n    GetPotIsCanUnLock(potId) {\r\n        if (Player.getInstance().nStar < Succulent_Cfg[potId].unlockstar) {\r\n            return false;\r\n        }\r\n        if (Player.getInstance().nGold < Succulent_Cfg[potId].gold) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n//# sourceMappingURL=FlowerpotSelView.js.map",
  "references": [
    "E:/project/duorou/client/src/ui/layaMaxUI.ts",
    "E:/project/duorou/client/src/manager/GameUIManager.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/game/player/Player.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/game/ui/Flowerpot/FlowerpotTipsView.ts"
  ],
  "map": "{\"version\":3,\"file\":\"FlowerpotSelView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/game/ui/Flowerpot/FlowerpotSelView.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
