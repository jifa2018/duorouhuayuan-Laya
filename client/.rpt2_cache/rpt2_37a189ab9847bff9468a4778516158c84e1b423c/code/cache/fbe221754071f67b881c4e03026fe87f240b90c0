{
  "code": "import { Singleton } from \"../../common/Singleton\";\r\nimport { Succulent_Cfg } from \"../../manager/ConfigManager\";\r\nimport { SaveManager, ModelStorage } from \"../../manager/SaveManager\";\r\nexport class BagSystem extends Singleton {\r\n    constructor() {\r\n        super();\r\n        this.itemArr = new Array();\r\n        var data = SaveManager.getInstance().GetCache(ModelStorage.bagsystem);\r\n        if (!data) {\r\n            this.addItem(10001, 1);\r\n            this.addItem(10002, 1);\r\n            this.addItem(10003, 1);\r\n            this.addItem(10004, 1);\r\n            this.addItem(10005, 1);\r\n            this.addItem(10006, 1);\r\n            this.addItem(10007, 1);\r\n            this.addItem(30001, 1);\r\n            this.addItem(30002, 1);\r\n            this.addItem(30003, 1);\r\n            this.addItem(10001, 1);\r\n            this.addItem(10002, 1);\r\n            this.addItem(10003, 1);\r\n            this.addItem(10004, 1);\r\n            this.addItem(10005, 1);\r\n            this.addItem(10006, 1);\r\n            this.addItem(10007, 1);\r\n            this.addItem(30001, 1);\r\n            this.addItem(30002, 1);\r\n            this.addItem(30003, 1);\r\n            this.addItem(10001, 1);\r\n            this.addItem(10002, 1);\r\n            this.addItem(10003, 1);\r\n            this.addItem(10004, 1);\r\n            this.addItem(10005, 1);\r\n            this.addItem(10006, 1);\r\n            this.addItem(10007, 1);\r\n            this.addItem(30001, 1);\r\n            this.addItem(30002, 1);\r\n            this.addItem(30003, 1);\r\n            this.addItem(10001, 1);\r\n            this.addItem(10002, 1);\r\n            this.addItem(10003, 1);\r\n            this.addItem(10004, 1);\r\n            this.addItem(10005, 1);\r\n            this.addItem(10006, 1);\r\n            this.addItem(10007, 1);\r\n            this.addItem(30001, 1);\r\n            this.addItem(30002, 1);\r\n            this.addItem(30003, 1);\r\n            this.addItem(10001, 1);\r\n            this.addItem(10002, 1);\r\n            this.addItem(10003, 1);\r\n            this.addItem(10004, 1);\r\n            this.addItem(10005, 1);\r\n            this.addItem(10006, 1);\r\n            this.addItem(10007, 1);\r\n            this.addItem(30001, 1);\r\n            this.addItem(30002, 1);\r\n            this.addItem(30003, 1);\r\n        }\r\n        else {\r\n            this.itemArr = JSON.parse(data);\r\n        }\r\n    }\r\n    initBag(data) {\r\n    }\r\n    addItem(itemId, itemNumber) {\r\n        if (itemNumber <= 0)\r\n            return;\r\n        var type = this.getItemType(itemId);\r\n        this._add(type, itemId, itemNumber);\r\n        this.packData();\r\n    }\r\n    delItem(itemId, itemNumber) {\r\n        if (!this.canDel(itemId, itemNumber, true)) {\r\n            console.log(\"背包中没有此物品\");\r\n        }\r\n    }\r\n    canDel(itemId, itemNumber, bDel) {\r\n        var type = this.getItemType(itemId);\r\n        for (var i = 0; i < this.itemArr[type].length; ++i) {\r\n            if (this.itemArr[type][i].itemId == itemId) {\r\n                if (this.itemArr[type][i].itemNum < itemNumber)\r\n                    return false;\r\n                if (bDel) {\r\n                    if (this.itemArr[type][i].itemNum > itemNumber)\r\n                        this.itemArr[type][i].itemNum -= itemNumber;\r\n                    else\r\n                        this.itemArr[type].splice(i, 1);\r\n                    this.packData();\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    getItemByType(type) {\r\n        if (!this.itemArr[type])\r\n            return null;\r\n        return this.itemArr[type];\r\n    }\r\n    packData() {\r\n        var d = JSON.stringify(this.itemArr);\r\n        SaveManager.getInstance().SetBagSystemCache(d);\r\n    }\r\n    _add(type, itemId, itemNumber) {\r\n        if (!this.itemArr[type])\r\n            this.itemArr[type] = new Array();\r\n        var haveItem = false;\r\n        for (var i = 0; i < this.itemArr[type].length; ++i) {\r\n            if (this.itemArr[type][i].itemId == itemId) {\r\n                this.itemArr[type][i].itemNum += itemNumber;\r\n                haveItem = true;\r\n            }\r\n        }\r\n        if (!haveItem) {\r\n            var itemObj = new item();\r\n            itemObj.itemId = itemId;\r\n            itemObj.itemNum = itemNumber;\r\n            this.itemArr[type].push(itemObj);\r\n        }\r\n    }\r\n    getItemType(itemId) {\r\n        return Succulent_Cfg[itemId].type;\r\n    }\r\n}\r\nclass item {\r\n}\r\n//# sourceMappingURL=BagSystem.js.map",
  "references": [
    "E:/project/duorou/client/src/common/Singleton.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/manager/SaveManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"BagSystem.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/bag/BagSystem.ts\"],\"names\":[],\"mappings\":\"AAMA,OAAO,EAAC,SAAS,EAAC,MAAM,wBAAwB,CAAC;AACjD,OAAO,EAAC,aAAa,EAAC,MAAM,6BAA6B,CAAC;AAE1D,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAEtE,MAAM,OAAO,SAAU,SAAQ,SAAS;IAIpC;QACI,KAAK,EAAE,CAAC;QAHJ,YAAO,GAAc,IAAI,KAAK,EAAO,CAAC;QAK1C,IAAI,IAAI,GAAG,WAAW,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QACtE,IAAG,CAAC,IAAI,EACR;YACI,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAEvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAEvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAEvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YAEvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,OAAO,CAA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\"}"
}
