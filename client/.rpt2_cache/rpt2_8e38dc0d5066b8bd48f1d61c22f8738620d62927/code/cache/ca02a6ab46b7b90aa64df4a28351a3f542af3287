{
  "code": "var Sprite = Laya.Sprite;\r\nimport { Utils } from \"../../../utils/Utils\";\r\nvar Handler = Laya.Handler;\r\nvar ProgressBar = Laya.ProgressBar;\r\nimport { LayerManager } from \"../../../manager/LayerManager\";\r\nimport { Time } from \"../../../common/Time\";\r\nimport { PotManager } from \"../../../manager/PotManager\";\r\nexport class TreeGrowProgressBar extends Sprite {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.GrowStartTime = 0;\r\n        this.GrowTime = 0;\r\n    }\r\n    init(camera, owner = null, data, handler = null) {\r\n        this.sceneCamera = camera;\r\n        this.owner = owner;\r\n        this.callback = handler;\r\n        this.GrowStartTime = data.startTime;\r\n        this.GrowTime = data.growTime;\r\n        this.pointName = data.pointName;\r\n        this.index = data.index;\r\n        if (!this.progress) {\r\n            Laya.loader.load([\"gameui/flowerstate/progress.png\", \"gameui/flowerstate/progress$bar.png\"], Handler.create(this, function () {\r\n                this.progress = new ProgressBar(\"gameui/flowerstate/progress.png\");\r\n                this.progress.width = 160;\r\n                this.progress.height = 26;\r\n                this.progress.sizeGrid = \"0,18,0,18\";\r\n                this.progress.pivot(this.progress.width / 2, this.progress.height / 2);\r\n                this.addChild(this.progress);\r\n                this.timeLabel = new Laya.Label(Utils.formatStandardTime(this.GrowTime - (Time.Seconds - this.GrowStartTime), false));\r\n                this.timeLabel.fontSize = 18;\r\n                this.timeLabel.align = \"center\";\r\n                this.timeLabel.color = \"#8d4e10\";\r\n                this.timeLabel.pivot(this.timeLabel.width / 2, this.timeLabel.height);\r\n                this.addChild(this.timeLabel);\r\n                this.setPosition();\r\n                Laya.timer.loop(10, this, this.setPosition);\r\n                LayerManager.getInstance().downUILayer.addChild(this);\r\n                this.callback && this.callback.run();\r\n            }));\r\n        }\r\n        else {\r\n            this.setProgress(0);\r\n            Laya.timer.loop(10, this, this.setPosition);\r\n            LayerManager.getInstance().uiLayer.addChild(this);\r\n            this.callback && this.callback.run();\r\n        }\r\n    }\r\n    setProgress(value) {\r\n        this.progress.value = value;\r\n    }\r\n    UpdateProgress() {\r\n        let nPro = (Time.Seconds - this.GrowStartTime) / this.GrowTime;\r\n        this.progress.value = nPro;\r\n        this.timeLabel.text = Utils.format(\"正在成长 {0}\", Utils.formatStandardTime(this.GrowTime - (Time.Seconds - this.GrowStartTime), false));\r\n        this.timeLabel.pivot(this.timeLabel.width / 2, this.timeLabel.height / 2);\r\n        if ((1 - nPro) <= 0) {\r\n            Laya.timer.clear(this, this.setPosition);\r\n            this.destroy(true);\r\n            PotManager.getInstance().UpdateScenePot(this.pointName, this.index);\r\n        }\r\n    }\r\n    setPosition() {\r\n        if (!this.owner)\r\n            return;\r\n        var v2 = Utils.worldToScreen(this.sceneCamera, this.owner.transform.position);\r\n        this.pos(v2.x, v2.y - 90);\r\n        this.UpdateProgress();\r\n    }\r\n    isMove() {\r\n        return this.owner.isMove;\r\n    }\r\n    destroy(destroyChild) {\r\n        this.removeSelf();\r\n        Laya.timer.clear(this, this.setPosition);\r\n    }\r\n}\r\n//# sourceMappingURL=TreeGrowProgressBar.js.map",
  "references": [
    "E:/project/duorou/client/src/game/npc/NpcBase.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/manager/LayerManager.ts",
    "E:/project/duorou/client/src/common/Time.ts",
    "E:/project/duorou/client/src/manager/PotManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"TreeGrowProgressBar.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/game/ui/ProgressBar/TreeGrowProgressBar.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
