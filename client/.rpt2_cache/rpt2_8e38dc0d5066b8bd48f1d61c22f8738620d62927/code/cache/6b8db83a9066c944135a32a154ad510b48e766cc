{
  "code": "var Sprite = Laya.Sprite;\r\nvar Handler = Laya.Handler;\r\nimport { Utils } from \"../../../utils/Utils\";\r\nvar Pool = Laya.Pool;\r\nvar Event = Laya.Event;\r\nimport { Action_Cfg } from \"../../../manager/ConfigManager\";\r\nvar Tween = Laya.Tween;\r\nexport var BubbleType;\r\n(function (BubbleType) {\r\n    BubbleType[BubbleType[\"Normal\"] = 0] = \"Normal\";\r\n    BubbleType[BubbleType[\"Wealthy\"] = 1] = \"Wealthy\";\r\n    BubbleType[BubbleType[\"pickMoney\"] = 2] = \"pickMoney\";\r\n    BubbleType[BubbleType[\"Noise\"] = 3] = \"Noise\";\r\n    BubbleType[BubbleType[\"Collect\"] = 4] = \"Collect\";\r\n})(BubbleType || (BubbleType = {}));\r\nexport class Bubble extends Sprite {\r\n    init(tableId, camera, type, owner = null, handler = null) {\r\n        this.sceneCamera = camera;\r\n        this.owner = owner;\r\n        this.bubble = new Sprite();\r\n        this.type = type;\r\n        this.callback = handler;\r\n        this.mouseEnabled = true;\r\n        this.bubble.mouseEnabled = true;\r\n        this.bubble.name = \"bubble\";\r\n        this.on(Event.MOUSE_UP, this, this.onClick);\r\n        this.addChild(this.bubble);\r\n        var str = Action_Cfg[tableId].stricon;\r\n        if (!str)\r\n            return;\r\n        this.bubble.loadImage(str, Handler.create(this, function (ret) {\r\n            this.bubble.pivotX = this.bubble.width / 2;\r\n            this.bubble.pivotY = this.bubble.height;\r\n            this.setPosition();\r\n        }));\r\n    }\r\n    changeImage(url) {\r\n        if (!url)\r\n            return;\r\n        this.off(Event.MOUSE_UP, this, this.onClick);\r\n        this.bubble.loadImage(url, Handler.create(this, function (ret) {\r\n            this.bubble.pivotX = this.bubble.width / 2;\r\n            this.bubble.pivotY = this.bubble.height;\r\n            this.setPosition();\r\n        }));\r\n    }\r\n    RotationIcon() {\r\n        var add = false;\r\n        Laya.timer.loop(1, this, () => {\r\n            if (!add) {\r\n                this.bubble.scaleX -= 0.2;\r\n                if (this.bubble.scaleX <= -1)\r\n                    add = true;\r\n            }\r\n            else {\r\n                this.bubble.scaleX += 0.2;\r\n                if (this.bubble.scaleX >= 1)\r\n                    add = false;\r\n            }\r\n        });\r\n    }\r\n    onClick(e) {\r\n        this.scaleX = 1.1;\r\n        this.scaleY = 1.1;\r\n        Tween.to(this, { scaleX: 1, scaleY: 1 }, 50);\r\n        this.callback && this.callback.run();\r\n    }\r\n    setPosition() {\r\n        if (!this.owner)\r\n            return;\r\n        if (this.bubble == null || this.bubble == undefined)\r\n            return;\r\n        var v2 = Utils.worldToScreen(this.sceneCamera, this.owner.transform.position);\r\n        this.pos(v2.x, v2.y - 80);\r\n    }\r\n    isMove() {\r\n        return this.owner.isMove;\r\n    }\r\n    destroy(destroyChild) {\r\n        this.off(Event.MOUSE_UP, this, this.onClick);\r\n        this.bubble.destroy();\r\n        this.bubble = null;\r\n        this.removeSelf();\r\n        Pool.recover(\"bubble\", this);\r\n        Laya.timer.clearAll(this);\r\n    }\r\n}\r\n//# sourceMappingURL=Bubble.js.map",
  "references": [
    "E:/project/duorou/client/src/game/npc/NpcBase.ts",
    "E:/project/duorou/client/src/utils/Utils.ts",
    "E:/project/duorou/client/src/common/Debug.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Bubble.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/game/ui/Bubble/Bubble.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
