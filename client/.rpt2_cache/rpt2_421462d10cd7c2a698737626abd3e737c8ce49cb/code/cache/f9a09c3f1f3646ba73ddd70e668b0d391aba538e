{
  "code": "import { ResourceManager } from \"../../manager/ResourceManager\";\r\nvar Handler = Laya.Handler;\r\nvar Sprite3D = Laya.Sprite3D;\r\nimport { Decorate } from \"./Decorate\";\r\nimport { Statue_Cfg } from \"../../manager/ConfigManager\";\r\nimport { BottomCreater } from \"./BottomCreater\";\r\nimport GameScene from \"../scene/GameScene\";\r\nexport class Bottom extends Sprite3D {\r\n    constructor() {\r\n        super(...arguments);\r\n        this._data = null;\r\n        this._level = 1;\r\n        this._attraction = 0;\r\n        this._star = 0;\r\n        this._curDecorate = null;\r\n        this._curDecorateId = null;\r\n        this._unLockDecorates = [];\r\n        this._sustain = 0;\r\n        this._interval = 0;\r\n        this._weight = 0;\r\n        this._curDecorateInfo = null;\r\n        this._zoom = 1;\r\n        this._indicateEffect = null;\r\n    }\r\n    init(_data) {\r\n        this._data = _data;\r\n        this._bId = _data.bId;\r\n        this._name = _data.parentName;\r\n        this._level = _data.bLevel;\r\n        this._attraction = _data.attraction;\r\n        this._star = _data.star;\r\n        this._curDecorateId = _data.curDecorateId;\r\n        this._unLockDecorates = _data.unLockDecorates;\r\n        this._curDecorateInfo = _data.curDecorateInfo;\r\n        var url = Statue_Cfg[this._bId].strStatueModel;\r\n        this._zoom = this.getZoom();\r\n        ResourceManager.getInstance().getResource(url, Handler.create(this, this.onLoaded));\r\n    }\r\n    resetInifo() {\r\n        this._sustain = Statue_Cfg[this._bId].sustain;\r\n        this._interval = Statue_Cfg[this._bId].interval;\r\n        this._weight = Statue_Cfg[this._bId].weight;\r\n    }\r\n    onLoaded(bottom) {\r\n        this._model && this._model.destroy();\r\n        this._model = null;\r\n        let decorate = new Laya.Sprite3D();\r\n        decorate.name = \"decorate\";\r\n        this._model = bottom;\r\n        this.addChild(bottom);\r\n        bottom.transform.setWorldLossyScale(new Laya.Vector3(this._zoom, this._zoom, this._zoom));\r\n        this._model.addChild(decorate);\r\n        this.resetInifo();\r\n        this._indicateEffect = GameScene.instance.scene3d.getChildByName(\"point\").getChildByName(this._name + \"_jiantou\");\r\n        this._indicateEffect.active = false;\r\n        if (this._curDecorateId) {\r\n            this.addDecorate();\r\n        }\r\n    }\r\n    addDecorate() {\r\n        let url = Statue_Cfg[this._bId].strEffect;\r\n        var dec = new Decorate();\r\n        dec.setInfo(this._curDecorateInfo, this._sustain, this._interval);\r\n        dec.addEffect(url, this._indicateEffect);\r\n        dec.onChangeModel(this._curDecorateId);\r\n        this._curDecorateId = this._curDecorateId;\r\n        this._curDecorate = dec;\r\n        this._model.getChildByName(\"point\").destroyChildren();\r\n        this._model.getChildByName(\"point\").addChild(dec);\r\n    }\r\n    onLevelUp(maxLv) {\r\n        if (this._level >= maxLv)\r\n            return;\r\n        this._level += 1;\r\n        this._bId = BottomCreater.getInstance().getStatueItemData(this._level).id;\r\n        var url = Statue_Cfg[this._bId].strStatueModel;\r\n        ResourceManager.getInstance().getResource(url, Handler.create(this, this.onLoaded));\r\n    }\r\n    unLockDecoratesById(_id) {\r\n        this._unLockDecorates.push(_id);\r\n    }\r\n    addStar(v) {\r\n        this._star += v;\r\n    }\r\n    addAttraction(v) {\r\n        this._attraction += v;\r\n    }\r\n    getZoom() {\r\n        let zoom;\r\n        BottomCreater.getInstance().defaultStatueArray.forEach(element => {\r\n            if (element.strNodeName == this._name) {\r\n                zoom = element.zoom;\r\n            }\r\n        });\r\n        return zoom;\r\n    }\r\n    getWeight() {\r\n        return this._weight;\r\n    }\r\n}\r\n//# sourceMappingURL=Bottom.js.map",
  "references": [
    "E:/project/duorou/client/src/manager/ResourceManager.ts",
    "E:/project/duorou/client/src/game/item/Decorate.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/game/item/BottomCreater.ts",
    "E:/project/duorou/client/src/effect/Effect3D.ts",
    "E:/project/duorou/client/src/game/scene/GameScene.ts"
  ],
  "map": "{\"version\":3,\"file\":\"Bottom.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/game/item/Bottom.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
