{
  "code": "import { ui } from \"../../../ui/layaMaxUI\";\r\nimport { GameUIManager } from \"../../../manager/GameUIManager\";\r\nimport { NewTip_Cfg } from \"../../../manager/ConfigManager\";\r\nimport { ViewManager } from \"../../../manager/ViewManager\";\r\nimport { GEvent } from \"../../../common/GEvent\";\r\nimport { GacEvent } from \"../../../common/GacEvent\";\r\nimport GameScene from \"../../scene/GameScene\";\r\nimport { StaffManager } from \"../../../manager/StaffManager\";\r\nimport { EffectManager } from \"../../../effect/EffectManager\";\r\nimport { StaffView } from \"../Staff/StaffView\";\r\nexport class UnlockView extends ui.view.UnLockViewUI {\r\n    constructor() {\r\n        super();\r\n        this._dataID = -1;\r\n        this._userID = -1;\r\n        this._userDataID = -1;\r\n        this._tipsEffect = null;\r\n        this._lightEffect = null;\r\n        this.createView(Laya.loader.getRes(\"view/UnLockView.json\"));\r\n        this.onEvent();\r\n    }\r\n    onEnable() {\r\n        this.width = Laya.stage.width;\r\n        this.height = Laya.stage.height;\r\n    }\r\n    onEvent() {\r\n        this.ui_sure_btn.on(Laya.Event.CLICK, this, this.SureClick);\r\n        this.ui_close_btn.on(Laya.Event.CLICK, this, this.CloseClick);\r\n    }\r\n    onDisable() {\r\n        this.offAll();\r\n        this.ui_sure_btn.offAll();\r\n        this.ui_close_btn.offAll();\r\n        if (this._tipsEffect) {\r\n            this._tipsEffect.Destroy();\r\n        }\r\n        if (this._lightEffect) {\r\n            this._lightEffect.Destroy();\r\n        }\r\n    }\r\n    Init(id, userID = -1, dataID = -1) {\r\n        this._dataID = id;\r\n        this._userID = userID;\r\n        this._userDataID = dataID;\r\n        this.fun_bg.visible = true;\r\n        this.fun_icon.visible = false;\r\n        this.Refresh();\r\n        this.PlayEffect();\r\n    }\r\n    PlayEffect() {\r\n        this._tipsEffect = EffectManager.getInstance().PlayOnceEffect(this.ui_tips_effect, 2, 1, false);\r\n        this._lightEffect = EffectManager.getInstance().PlayOnceEffect(this.ui_light_effect, 4, 1, true);\r\n    }\r\n    Refresh() {\r\n        this.ui_fun_icon.skin = NewTip_Cfg[this._dataID][\"strpicture\"];\r\n        this.ui_fun_pic.skin = NewTip_Cfg[this._dataID][\"strpicture\"];\r\n        this.ui_tips_font.text = NewTip_Cfg[this._dataID][\"strname\"];\r\n        this.ui_introduce_font.text = NewTip_Cfg[this._dataID][\"strdeclare\"];\r\n        if (NewTip_Cfg[this._dataID][\"share\"] == 1) {\r\n            this.ui_sure_btn.visible = true;\r\n            this.ui_close_btn.visible = false;\r\n        }\r\n        else {\r\n            this.ui_sure_btn.visible = false;\r\n            this.ui_close_btn.visible = true;\r\n        }\r\n    }\r\n    SureClick() {\r\n        if (NewTip_Cfg[this._dataID][\"closeui\"] == 1) {\r\n            GameUIManager.getInstance().hideUI(StaffView);\r\n        }\r\n        this.PlayUnlockAnimation(this._dataID);\r\n        if (NewTip_Cfg[this._dataID][\"skipID\"] != -1) {\r\n            GameScene.instance.switchViewByIndex(NewTip_Cfg[this._dataID][\"skipID\"]);\r\n        }\r\n    }\r\n    CloseClick() {\r\n        if (NewTip_Cfg[this._dataID][\"closeui\"] == 1) {\r\n            GameUIManager.getInstance().hideUI(StaffView);\r\n        }\r\n        this.PlayUnlockAnimation(this._dataID);\r\n        GameScene.instance.switchViewByIndex(NewTip_Cfg[this._dataID][\"skipID\"]);\r\n    }\r\n    PlayUnlockAnimation(num) {\r\n        this.fun_bg.visible = false;\r\n        this.fun_icon.visible = true;\r\n        let fun = null;\r\n        let ra = 0;\r\n        let ba = 0;\r\n        this.ui_fun_pic.right = 273;\r\n        this.ui_fun_pic.bottom = 646;\r\n        switch (num) {\r\n            case 1:\r\n                ra = this.ui_money_box.right;\r\n                ba = this.ui_money_box.bottom;\r\n                fun = () => {\r\n                    StaffManager.getInstance().AddDustman(this._userID, this._userDataID);\r\n                };\r\n                break;\r\n            case 2:\r\n                ra = this.ui_photo_box.right;\r\n                ba = this.ui_photo_box.bottom;\r\n                fun = () => {\r\n                    StaffManager.getInstance().AddCameraman(this._userID, this._userDataID);\r\n                };\r\n                break;\r\n            case 3:\r\n                ra = this.ui_publicity_box.right;\r\n                ba = this.ui_publicity_box.bottom;\r\n                fun = () => {\r\n                    StaffManager.getInstance().Addpropagandist(this._userID, this._userDataID);\r\n                };\r\n                break;\r\n        }\r\n        this.AnimationMove(this.ui_fun_pic, ra, ba, Laya.Handler.create(this, () => {\r\n            if (fun) {\r\n                fun();\r\n            }\r\n            GEvent.DispatchEvent(GacEvent.RefreshUserInfo);\r\n            GameUIManager.getInstance().destroyUI(UnlockView);\r\n        }));\r\n    }\r\n    AnimationMove(box, r, b, fun) {\r\n        Laya.Tween.to(box, { right: r, bottom: b }, 600, Laya.Ease.linearIn, Laya.Handler.create(this, () => {\r\n            fun.runWith(true);\r\n        }));\r\n    }\r\n}\r\nViewManager.getInstance().SaveViewResUrl(UnlockView, [\r\n    { url: \"view/UnLockView.json\", type: Laya.Loader.JSON },\r\n]);\r\n//# sourceMappingURL=UnlockView.js.map",
  "references": [
    "E:/project/duorou/client/src/ui/layaMaxUI.ts",
    "E:/project/duorou/client/src/manager/GameUIManager.ts",
    "E:/project/duorou/client/src/manager/ConfigManager.ts",
    "E:/project/duorou/client/src/manager/ViewManager.ts",
    "E:/project/duorou/client/src/common/GEvent.ts",
    "E:/project/duorou/client/src/common/GacEvent.ts",
    "E:/project/duorou/client/src/game/scene/GameScene.ts",
    "E:/project/duorou/client/src/manager/StaffManager.ts",
    "E:/project/duorou/client/src/effect/EffectManager.ts",
    "E:/project/duorou/client/src/game/ui/Staff/StaffView.ts",
    "E:/project/duorou/client/src/effect/Avatars.ts"
  ],
  "map": "{\"version\":3,\"file\":\"UnlockView.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/game/ui/Unlock/UnlockView.ts\"],\"names\":[],\"mappings\":\"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\"}"
}
